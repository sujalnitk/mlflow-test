"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[419],{85392:function(e,t,s){s.d(t,{V:function(){return v}});var r=s(89555),i=s(31014),a=s(6224),n=s(95574),o=s(93215);const l=e=>{let{when:t,message:s}=e;const r=i.useContext(o.jb).navigator.block;return i.useEffect((()=>{if(!t)return;return null===r||void 0===r?void 0:r((()=>window.confirm(s)))}),[s,r,t]),null};var d=s(75703),c=s(11473),u=s(88443),h=s(64912),p=s(50111);class m extends i.Component{constructor(){super(...arguments),this.state={markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab,error:null},this.converter=(0,c.T7)(),this.handleMdeValueChange=e=>{this.setState({markdown:e})},this.handleTabChange=e=>{this.setState({selectedTab:e})},this.handleSubmitClick=()=>{const{onSubmit:e}=this.props,{markdown:t}=this.state;return this.setState({confirmLoading:!0}),e?Promise.resolve(e(t)).then((()=>{this.setState({confirmLoading:!1,error:null})})).catch((e=>{this.setState({confirmLoading:!1,error:e&&e.getMessageField?e.getMessageField():this.props.intl.formatMessage({id:"SzvvXl",defaultMessage:"Failed to submit"})})})):null},this.handleCancelClick=()=>{this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab});const{onCancel:e}=this.props;e&&e()}}contentHasChanged(){return this.state.markdown!==this.props.defaultMarkdown}renderActions(){const{confirmLoading:e}=this.state;return(0,p.Y)("div",{className:"editable-note-actions",children:(0,p.FD)("div",{children:[(0,p.Y)(a.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_114",type:"primary",className:"editable-note-save-button",onClick:this.handleSubmitClick,disabled:!this.contentHasChanged()||e,loading:e,"data-testid":"editable-note-save-button",children:this.props.saveText}),(0,p.Y)(a.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_124",htmlType:"button",className:"editable-note-cancel-button",onClick:this.handleCancelClick,disabled:e,children:(0,p.Y)(u.A,{id:"17k196",defaultMessage:"Cancel"})})]})})}getSanitizedHtmlContent(){const{markdown:e}=this.state;if(e){const t=(0,c.NW)(this.converter.makeHtml(e));return(0,c.Yc)(t)}return null}render(){const{showEditor:e}=this.props,{markdown:t,selectedTab:s,error:r}=this.state,a=this.getSanitizedHtmlContent();return(0,p.Y)("div",{className:"note-view-outer-container",children:e?(0,p.FD)(i.Fragment,{children:[(0,p.Y)("div",{className:"note-view-text-area",children:(0,p.Y)(d.default,{value:t,minEditorHeight:this.props.minEditorHeight,maxEditorHeight:this.props.maxEditorHeight,minPreviewHeight:50,childProps:this.props.childProps,toolbarCommands:this.props.toolbarCommands,onChange:this.handleMdeValueChange,selectedTab:s,onTabChange:this.handleTabChange,generateMarkdownPreview:e=>Promise.resolve(this.getSanitizedHtmlContent(e)),getIcon:e=>(0,p.Y)(g,{name:e})})}),r&&(0,p.Y)(n.FcD,{type:"error",message:this.props.intl.formatMessage({id:"79dD5F",defaultMessage:"There was an error submitting your note."}),description:r,closable:!0}),this.renderActions(),(0,p.Y)(l,{when:this.contentHasChanged(),message:this.props.intl.formatMessage({id:"dwTTNK",defaultMessage:"Are you sure you want to navigate away? Your pending text changes will be lost."})})]}):(0,p.Y)(f,{content:a})})}}function g(e){const{theme:t}=(0,a.u)(),{name:s}=e;return(0,p.Y)(n.m_M,{position:"top",title:s,children:(0,p.Y)("span",{css:(0,r.AH)({color:t.colors.textPrimary},""),children:(0,p.Y)(d.SvgIcon,{icon:s})})})}function f(e){const{content:t}=e;return t?(0,p.Y)("div",{className:"note-view-outer-container",children:(0,p.Y)("div",{className:"note-view-text-area",children:(0,p.Y)("div",{className:"note-view-preview note-editor-preview",children:(0,p.Y)("div",{className:"note-editor-preview-content","data-testid":"note-editor-preview-content",dangerouslySetInnerHTML:{__html:e.content}})})})}):(0,p.Y)("div",{children:(0,p.Y)(u.A,{id:"PRe/8y",defaultMessage:"None"})})}m.defaultProps={defaultMarkdown:"",defaultSelectedTab:"write",showEditor:!1,saveText:(0,p.Y)(u.A,{id:"Shv28w",defaultMessage:"Save"}),confirmLoading:!1,toolbarCommands:[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]],maxEditorHeight:500,minEditorHeight:200,childProps:{}};const v=(0,h.Ay)(m)},20978:function(e,t,s){s.d(t,{tj:function(){return v}});var r=s(89555),i=s(95574),a=s(6224),n=s(31014),o=s(88464),l=s(51476),d=s(56412),c=s(50111);const{Paragraph:u}=a.T;var h={name:"zjik7",styles:"display:flex"},p={name:"1ff36h2",styles:"flex-grow:1"};const m=n.memo((e=>{const{theme:t}=(0,a.u)();return(0,c.Y)(l.M,{title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:h,children:[(0,c.Y)(u,{css:p,children:(0,c.Y)("pre",{css:(0,r.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,r.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(i.TdU,{}),"aria-label":"Copy"})})]})})})),g=30;function f(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const v=e=>{let{isClosable:t=!1,onClose:s,tag:l,enableFullViewModal:d=!1,charLimit:u=g,maxWidth:h=300,className:p}=e;const v=(0,o.A)(),[y,Y]=(0,n.useState)(!1),{shouldTruncateKey:x,shouldTruncateValue:M}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;const{key:s,value:r}=e,i=s.length+r.length,a=s.length>r.length,n=a?r.length:s.length;return i<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:n>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:a,shouldTruncateValue:!a}}(l,u),w=d&&(x||M),A=v.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(i.vwO,{closable:t,onClose:s,title:l.key,className:p,children:(0,c.Y)(i.m_M,{title:w?A:"",children:(0,c.FD)("span",{css:(0,r.AH)({maxWidth:h,display:"inline-flex"},""),onClick:()=>w?Y(!0):void 0,children:[(0,c.Y)(a.T.Text,{bold:!0,title:l.key,css:f(x),children:l.key}),l.value&&(0,c.FD)(a.T.Text,{title:l.value,css:f(M),children:[": ",l.value]})]})})}),(0,c.Y)("div",{children:y&&(0,c.Y)(m,{tagKey:l.key,tagValue:l.value,isKeyValueTagFullViewModalVisible:y,setIsKeyValueTagFullViewModalVisible:Y})})]})}},48588:function(e,t,s){s.d(t,{L:function(){return n}});s(31014);var r=s(95574),i=s(51476),a=s(50111);function n(e){const{usesFullHeight:t,...s}=e;return(0,a.FD)(r.ffj,{css:t?o.useFullHeightLayout:o.wrapper,children:[(0,a.Y)(i.S,{css:o.fixedSpacer}),t?e.children:(0,a.Y)("div",{...s,css:o.container})]})}n.defaultProps={usesFullHeight:!1};const o={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},43683:function(e,t,s){s.d(t,{Q:function(){return A}});var r=s(89555),i=s(9133),a=s(31014),n=s(6224),o=s(51476),l=s(95574),d=s(31231),c=s(88464),u=s(88443),h=s(13369),p=s(50111);var m={name:"4zleql",styles:"display:block"};function g(e){return t=>function(e,t){const s=(0,c.A)(),{theme:o}=(0,n.u)(),u=e.props.searchValue.toLowerCase();return(0,a.useMemo)((()=>{if(!u)return e;if((0,i.sortedIndexOf)(t,u)>=0)return e;const n=/^[^,.:/=\-\s]+$/.test(u);return a.cloneElement(e,{flattenOptions:[{data:{value:u,disabled:!n,style:{color:n?o.colors.actionTertiaryTextDefault:o.colors.actionDisabledText},children:(0,p.Y)(l.m_M,{title:n?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,p.FD)("span",{css:m,children:[(0,p.Y)(d.P,{css:(0,r.AH)({marginRight:o.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:u})]})})},key:u,groupOption:!1},...e.props.flattenOptions]})}),[t,e,u,s,o])}(t,e)}var f={name:"1d3w5wq",styles:"width:100%"};function v(e){let{allAvailableTags:t,control:s,onKeyChangeCallback:r}=e;const i=(0,c.A)(),[n,o]=(0,a.useState)(!1),d=(0,a.useRef)(null),{field:u,fieldState:m}=(0,h.as)({control:s,name:"key",rules:{required:{message:i.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,p.Y)(l._vn,{allowClear:!0,ref:d,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:g(t)},css:f,placeholder:i.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:u.value,defaultValue:u.value,open:n,onDropdownVisibleChange:e=>{o(e)},filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{u.onChange(e),null===r||void 0===r||r(e)},onClear:()=>{u.onChange(void 0),null===r||void 0===r||r(void 0)},validationState:m.error?"error":void 0,children:t.map((e=>(0,p.Y)(l._vn.Option,{value:e,children:e},e)))})}var y=s(20978),Y=s(52350);function x(e){return new Map(e.map((e=>[e.key,e])))}var M={name:"82a6rk",styles:"flex:1"},w={name:"82a6rk",styles:"flex:1"};const A=e=>{let{onSuccess:t,saveTagsHandler:s,allAvailableTags:m,valueRequired:g=!1}=e;const f=(0,a.useRef)(),[A,b]=(0,a.useState)(""),{theme:S}=(0,n.u)(),[R,I]=(0,a.useState)(new Map),[k,D]=(0,a.useState)(new Map),[N,T]=(0,a.useState)(!1),F=(0,h.mN)({defaultValues:{key:void 0,value:""}}),_=()=>T(!1),U=(0,a.useCallback)((e=>{f.current=e,I(x(e.tags||[])),D(x(e.tags||[])),F.reset(),T(!0)}),[F]),L=async()=>{f.current&&(b(""),z(!0),s(f.current,Array.from(R.values()),Array.from(k.values())).then((()=>{_(),null===t||void 0===t||t(),z(!1)})).catch((e=>{var t;z(!1),b(e instanceof Y.s?null===(t=e.getUserVisibleError())||void 0===t?void 0:t.message:e.message)})))},H=(0,c.A)(),E=F.watch(),[P,z]=(0,a.useState)(!1),B=(0,a.useMemo)((()=>!(0,i.isEqual)((0,i.sortBy)(Array.from(R.values()),"key"),(0,i.sortBy)(Array.from(k.values()),"key"))),[R,k]),V=E.key||E.value,K=B&&V;return{EditTagsModal:(0,p.FD)(o.M,{destroyOnClose:!0,visible:N,title:(0,p.Y)(u.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:_,footer:(0,p.FD)(n.R,{children:[(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:_,css:(0,r.AH)({marginRight:B?0:S.spacing.sm},""),children:H.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),K?(0,p.Y)(C,{formValues:E,isLoading:P,onSaveTask:L}):(0,p.Y)(l.m_M,{title:B?void 0:H.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!B,loading:P,type:"primary",onClick:L,children:H.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,p.FD)("form",{onSubmit:F.handleSubmit((()=>{if(g&&!E.value.trim())return;const e=new Map(k);e.set(E.key,E),D(e),F.reset()})),css:(0,r.AH)({display:"flex",alignItems:"flex-end",gap:S.spacing.md},""),children:[(0,p.FD)("div",{css:(0,r.AH)({minWidth:0,display:"flex",gap:S.spacing.md,flex:1},""),children:[(0,p.FD)("div",{css:M,children:[(0,p.Y)(l.D$Q.Label,{htmlFor:"key",children:H.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,p.Y)(v,{allAvailableTags:m||[],control:F.control,onKeyChangeCallback:e=>{var t;const s=e?k.get(e):void 0;F.setValue("value",null!==(t=null===s||void 0===s?void 0:s.value)&&void 0!==t?t:"")}})]}),(0,p.FD)("div",{css:w,children:[(0,p.Y)(l.D$Q.Label,{htmlFor:"value",children:g?H.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):H.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,p.Y)(l.tc_.Input,{name:"value",control:F.control,"aria-label":g?H.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):H.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:H.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,p.Y)(l.m_M,{title:H.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":H.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,p.Y)(d.P,{})})})]}),A&&(0,p.Y)(l.D$Q.Message,{type:"error",message:A}),(0,p.Y)("div",{css:(0,r.AH)({display:"flex",rowGap:S.spacing.xs,flexWrap:"wrap",marginTop:S.spacing.sm},""),children:Array.from(k.values()).map((e=>(0,p.Y)(y.tj,{isClosable:!0,tag:e,onClose:()=>(e=>{let{key:t}=e;D((e=>(e.delete(t),new Map(e))))})(e)},e.key)))})]}),showEditTagsModal:U,isLoading:P}};var b={name:"1y0ex1",styles:"max-width:400px"};function C(e){let{isLoading:t,formValues:s,onSaveTask:a}=e;const o=(0,c.A)(),{theme:d}=(0,n.u)(),u=`${`${(0,i.truncate)(s.key,{length:20})||"_"}`}${s.value?`:${(0,i.truncate)(s.value,{length:20})}`:""}`,h=o.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:u});return(0,p.FD)(l.AMh.Root,{children:[(0,p.Y)(l.AMh.Trigger,{asChild:!0,children:(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:t,type:"primary",children:o.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,p.FD)(l.AMh.Content,{align:"end","aria-label":h,children:[(0,p.Y)(n.T.Paragraph,{css:b,children:h}),(0,p.Y)(l.AMh.Close,{asChild:!0,children:(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:a,children:o.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,p.Y)(l.AMh.Close,{asChild:!0,children:(0,p.Y)(n.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,r.AH)({marginLeft:d.spacing.sm},""),children:o.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,p.Y)(l.AMh.Arrow,{})]})]})}},57596:function(e,t,s){s.d(t,{F:function(){return l}});var r=s(95574),i=s(6224),a=(s(31014),s(88443)),n=s(50111);var o={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"};const l=e=>{let{description:t,title:s,...l}=e;return(0,n.Y)("div",{css:o,...l,children:(0,n.Y)(r.SvL,{image:(0,n.Y)(i.q,{}),title:null!==s&&void 0!==s?s:(0,n.Y)(a.A,{id:"Gm77Ws",defaultMessage:"Loading artifact failed"}),description:t})})}},8220:function(e,t,s){s.d(t,{$:function(){return h},d:function(){return u}});var r=s(89555),i=s(95574),a=s(6224),n=s(88443),o=s(50111);const l=e=>{let{count:t}=e;return(0,o.Y)(o.FK,{children:new Array(t).fill("").map(((e,t)=>(0,o.Y)(i.I_K,{seed:t.toString(),label:0===t?(0,o.Y)(n.A,{id:"v+0HXI",defaultMessage:"Artifact loading"}):void 0},t)))})};var d={name:"36bnqj",styles:"display:flex;flex:1"},c={name:"82a6rk",styles:"flex:1"};const u=()=>{const{theme:e}=(0,a.u)();return(0,o.FD)("div",{css:d,children:[(0,o.Y)("div",{css:c,children:(0,o.Y)("div",{css:(0,r.AH)({margin:e.spacing.sm},""),children:(0,o.Y)(l,{count:9})})}),(0,o.Y)("div",{css:(0,r.AH)({flex:3,borderLeft:`1px solid ${e.colors.border}`},""),children:(0,o.FD)("div",{css:(0,r.AH)({margin:e.spacing.sm},""),children:[(0,o.Y)(i.oud,{css:(0,r.AH)({marginBottom:e.spacing.md},"")}),(0,o.Y)(l,{count:3}),(0,o.Y)("div",{css:(0,r.AH)({width:"75%",marginTop:e.spacing.md},""),children:(0,o.Y)(l,{count:3})})]})})]})},h=e=>{const{theme:t}=(0,a.u)();return(0,o.Y)("div",{css:(0,r.AH)({margin:t.spacing.md},""),...e,children:(0,o.Y)(l,{count:9})})}},62054:function(e,t,s){s.r(t),s.d(t,{RunPage:function(){return kr},default:function(){return Dr}});var r=s(89555),i=s(95574),a=s(6224),n=s(10811),o=s(4877),l=s.n(o),d=s(31014),c=s(48588),u=s(93215),h=s(76010),p=s(25866),m=s(53677),g=s(9133),f=s.n(g),v=s(88443),y=s(25869),Y=s(64912);const x=e=>{const t=e.split(/[./]/);return t[t.length-1]},M="mlproject",w="mlmodel",A={[M.toLowerCase()]:"yaml",[w.toLowerCase()]:"yaml"},b=new Set(["jpg","bmp","jpeg","png","gif","svg"]),C=new Set(["txt","log","err","cfg","conf","cnf","cf","ini","properties","prop","hocon","toml","yaml","yml","xml","json","js","py","py3","md","rst",M.toLowerCase(),w.toLowerCase(),"jsonnet"]),S=new Set(["html"]),R=new Set(["geojson"]),I=new Set(["pdf"]),k=new Set(["csv","tsv"]);var D=s(38566),N=s(61902),T=s.n(N),F=s(51476),_=s(74662),U=s(69708),L=s(7204),H=s(59508),E=s(50111);class P extends d.Component{constructor(){super(),this.form=void 0,this.state={visible:!1,confirmLoading:!1,modelByName:{}},this.createRegisteredModelRequestId=(0,L.yk)(),this.createModelVersionRequestId=(0,L.yk)(),this.searchModelVersionRequestId=(0,L.yk)(),this.showRegisterModal=()=>{this.setState({visible:!0})},this.hideRegisterModal=()=>{var e,t;this.setState({visible:!1}),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.resetAndClearModalForm=()=>{var e,t;this.setState({visible:!1,confirmLoading:!1}),this.form.current.resetFields(),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.handleRegistrationFailure=e=>{this.setState({confirmLoading:!1}),h.A.logErrorAndNotifyUser(e)},this.handleSearchRegisteredModels=e=>{this.props.searchRegisteredModelsApi((0,H.pc)(e),5)},this.reloadModelVersionsForCurrentRun=()=>{const{runUuid:e}=this.props;return this.props.searchModelVersionsApi({run_id:e},this.searchModelVersionRequestId)},this.handleRegisterModel=()=>{this.form.current.validateFields().then((e=>{this.setState({confirmLoading:!0});const{runUuid:t,modelPath:s}=this.props,r=e[_.BE];r===_.QN?this.props.createRegisteredModelApi(e[_.F3],this.createRegisteredModelRequestId).then((()=>this.props.createModelVersionApi(e[_.F3],s,t,[],this.createModelVersionRequestId))).then(this.resetAndClearModalForm).catch(this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(h.A.logErrorAndNotifyUser):this.props.createModelVersionApi(r,s,t,[],this.createModelVersionRequestId).then(this.resetAndClearModalForm).catch(this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(h.A.logErrorAndNotifyUser)}))},this.form=d.createRef()}componentDidMount(){this.props.searchRegisteredModelsApi()}componentDidUpdate(e,t){!1===t.visible&&!0===this.state.visible&&this.props.searchRegisteredModelsApi()}renderRegisterModelForm(){const{modelByName:e}=this.props;return(0,E.Y)(_.xH,{modelByName:e,innerRef:this.form,onSearchRegisteredModels:f().debounce(this.handleSearchRegisteredModels,300)})}renderFooter(){return[(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_242",onClick:this.hideRegisterModal,children:(0,E.Y)(v.A,{id:"iwD/Dv",defaultMessage:"Cancel"})},"back"),(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_248",type:"primary",onClick:this.handleRegisterModel,"data-test-id":"confirm-register-model",children:(0,E.Y)(v.A,{id:"wBFfWW",defaultMessage:"Register"})},"submit")]}renderHelper(e,t){const{visible:s,confirmLoading:r}=this.state,{showButton:n=!0,buttonType:o}=this.props;return(0,E.FD)("div",{className:"register-model-btn-wrapper",children:[n&&(0,E.Y)(i.m_M,{title:this.props.tooltip||null,placement:"left",children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_261",className:"register-model-btn",type:o,onClick:this.showRegisterModal,disabled:e,htmlType:"button",children:(0,E.Y)(v.A,{id:"YQ+Eon",defaultMessage:"Register model"})})}),(0,E.Y)(F.M,{title:this.props.intl.formatMessage({id:"qSpgg/",defaultMessage:"Register model"}),width:540,visible:this.props.modalVisible||s,onOk:this.handleRegisterModel,okText:this.props.intl.formatMessage({id:"9W3kev",defaultMessage:"Register"}),confirmLoading:r,onCancel:this.hideRegisterModal,centered:!0,footer:this.renderFooter(),children:t})]})}render(){const{disabled:e}=this.props;return this.renderHelper(e,this.renderRegisterModelForm())}}const z={createRegisteredModelApi:U.eF,createModelVersionApi:U.Ey,searchModelVersionsApi:U.hY,searchRegisteredModelsApi:U.JK},B=(0,Y.Ay)(P),V=(0,n.Ng)((e=>({modelByName:e.entities.modelByName})),z)(B);var K=s(98590),O=s(77484),j=s(8875);var W={name:"82a6rk",styles:"flex:1"};const q={imageOuterContainer:{padding:"10px",overflow:"scroll",background:"white",minHeight:"100%"},imageWrapper:{display:"inline-block"},image:{cursor:"pointer","&:hover":{boxShadow:"0 0 4px gray"}},hidden:{display:"none"}};var G=e=>{let{runUuid:t,path:s,getArtifact:r=O.xC}=e;const[a,n]=(0,d.useState)(!0),[o,l]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null);return(0,d.useEffect)((()=>{n(!0),r((0,O.To)(s,t)).then((e=>{const t=s.toLowerCase().endsWith(".svg")?{type:"image/svg+xml"}:void 0;u(URL.createObjectURL(new Blob([new Uint8Array(e)],t))),n(!1)}))}),[t,s,r]),c&&(0,E.Y)("div",{css:W,children:(0,E.FD)("div",{css:q.imageOuterContainer,children:[a&&(0,E.Y)(i.PLz,{active:!0}),(0,E.Y)("div",{css:a?q.hidden:q.imageWrapper,children:(0,E.Y)("img",{alt:s,css:q.image,src:c,onLoad:()=>n(!1),onClick:()=>l(!0)})}),(0,E.Y)("div",{css:[q.hidden,""],children:(0,E.Y)(j.b,{visible:o,onVisibleChange:l,children:(0,E.Y)(j._,{src:c})})})]})})},J=s(7315),X=s(26217),Q=s(8220),$=s(57596);class Z extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,text:void 0,path:void 0},this.fetchArtifacts=this.fetchArtifacts.bind(this)}componentDidMount(){this.fetchArtifacts()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchArtifacts()}render(){if(this.state.loading||this.state.path!==this.props.path)return(0,E.Y)(Q.$,{className:"artifact-text-view-loading"});if(this.state.error)return(0,E.Y)($.F,{className:"artifact-text-view-error"});{const e=(this.props.size||0)>102400?"text":(e=>{const t=x(e).toLowerCase();return t in A?A[t]:t})(this.props.path),{theme:t}=this.props.designSystemThemeApi,s={fontFamily:"Source Code Pro,Menlo,monospace",fontSize:t.typography.fontSizeMd,overflow:"auto",marginTop:"0",width:"100%",height:"100%",padding:t.spacing.xs,borderColor:t.colors.borderDecorative,border:"none"},r=this.state.text?function(e,t){if("json"===e){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(s){}return t}return t}(e,this.state.text):this.state.text,i=t.isDarkMode?X.iU:X.ge;return(0,E.Y)("div",{className:"ShowArtifactPage",children:(0,E.Y)("div",{className:"text-area-border-box",children:(0,E.Y)(J.A,{language:e,style:i,customStyle:s,children:null!==r&&void 0!==r?r:""})})})}}fetchArtifacts(){var e,t;this.setState({loading:!0});const s=(0,O.To)(this.props.path,this.props.runUuid);null===(e=(t=this.props).getArtifact)||void 0===e||e.call(t,s).then((e=>{this.setState({text:e,loading:!1})})).catch((e=>{this.setState({error:e,loading:!1})})),this.setState({path:this.props.path})}}Z.defaultProps={getArtifact:O.Y0};var ee=d.memo((0,a.W)(Z)),te=s(27705);const se=d.lazy((()=>Promise.all([s.e(255),s.e(950)]).then(s.bind(s,40957)))),re=e=>(0,E.Y)(te.g,{children:(0,E.Y)(d.Suspense,{fallback:(0,E.Y)(i.PLz,{active:!0}),children:(0,E.Y)(se,{...e})})});var ie=s(28715);class ae extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,html:"",path:""},this.getBlobURL=(e,t)=>{const s=new Blob([e],{type:t});return URL.createObjectURL(s)},this.fetchArtifacts=this.fetchArtifacts.bind(this)}componentDidMount(){this.fetchArtifacts()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchArtifacts()}render(){return this.state.loading||this.state.path!==this.props.path?(0,E.Y)(Q.$,{className:"artifact-html-view-loading"}):this.state.error?(console.error("Unable to load HTML artifact, got error "+this.state.error),(0,E.Y)("div",{className:"artifact-html-view-error",children:"Oops we couldn't load your file because of an error."})):(0,E.Y)("div",{className:"artifact-html-view",children:(0,E.Y)(ie.A,{url:"",src:this.getBlobURL(this.state.html,"text/html"),width:"100%",height:"100%",id:"html",className:"html-iframe",display:"block",position:"relative",sandbox:"allow-scripts"})})}fetchArtifacts(){const e=(0,O.To)(this.props.path,this.props.runUuid);this.props.getArtifact(e).then((e=>{this.setState({html:e,loading:!1,path:this.props.path})})).catch((e=>{this.setState({error:e,loading:!1,path:this.props.path})}))}}ae.defaultProps={getArtifact:O.Y0};var ne=ae;const oe=d.lazy((()=>Promise.all([s.e(314),s.e(531)]).then(s.bind(s,46858)))),le=e=>(0,E.Y)(te.g,{children:(0,E.Y)(d.Suspense,{fallback:(0,E.Y)(i.PLz,{active:!0}),children:(0,E.Y)(oe,{...e})})}),de=d.lazy((()=>s.e(334).then(s.bind(s,73334)))),ce=e=>(0,E.Y)(te.g,{children:(0,E.Y)(d.Suspense,{fallback:(0,E.Y)(i.PLz,{active:!0}),children:(0,E.Y)(de,{...e})})});var ue=s(77948),he=s.n(ue),pe=s(92516),me=s(47664);const{Paragraph:ge,Text:fe,Title:ve}=a.T;class ye extends d.Component{constructor(e){super(e),this.state={loading:!0,error:void 0,inputs:void 0,outputs:void 0,flavor:void 0,loader_module:void 0},this.fetchLoggedModelMetadata=this.fetchLoggedModelMetadata.bind(this)}componentDidMount(){this.fetchLoggedModelMetadata()}componentDidUpdate(e){this.props.path===e.path&&this.props.runUuid===e.runUuid||this.fetchLoggedModelMetadata()}renderModelRegistryText(){return this.props.registeredModelLink?(0,E.Y)(E.FK,{children:(0,E.Y)(v.A,{id:"BQt0TQ",defaultMessage:"This model is also registered to the <link>model registry</link>.",values:{link:e=>(0,E.Y)("a",{href:ye.getLearnModelRegistryLinkUrl(),target:"_blank",children:e})}})}):(0,E.Y)(E.FK,{children:(0,E.Y)(v.A,{id:"js4/Y8",defaultMessage:"You can also <link>register it to the model registry</link> to version control",values:{link:e=>(0,E.Y)("a",{href:ye.getLearnModelRegistryLinkUrl(),target:"_blank",children:e})}})})}sparkDataFrameCodeText(e){return`import mlflow\nfrom pyspark.sql.functions import struct, col\nlogged_model = '${e}'\n\n# Load model as a Spark UDF.\nloaded_model = mlflow.pyfunc.spark_udf(spark, model_uri=logged_model)\n\n# Predict on a Spark DataFrame.\ndf.withColumn('predictions', loaded_model(struct(*map(col, df.columns))))`}loadModelCodeText(e,t){return`import mlflow\nlogged_model = '${e}'\n\n# Load model.\nloaded_model = mlflow.${t}.load_model(logged_model)\n`}pandasDataFrameCodeText(e){return`import mlflow\nlogged_model = '${e}'\n\n# Load model as a PyFuncModel.\nloaded_model = mlflow.pyfunc.load_model(logged_model)\n\n# Predict on a Pandas DataFrame.\nimport pandas as pd\nloaded_model.predict(pd.DataFrame(data))`}mlflowSparkCodeText(e){return`import mlflow\nlogged_model = '${e}'\n\n# Load model\nloaded_model = mlflow.spark.load_model(logged_model)\n\n# Perform inference via model.transform()\nloaded_model.transform(data)`}renderNonPyfuncCodeSnippet(){const{flavor:e}=this.state,{runUuid:t,path:s}=this.props,r=`runs:/${t}/${s}`;return"mleap"===e?(0,E.Y)(E.FK,{}):(0,E.FD)(E.FK,{children:[(0,E.Y)(ve,{level:3,children:(0,E.Y)(v.A,{id:"2NfDVN",defaultMessage:"Load the model"})}),(0,E.Y)("div",{className:"artifact-logged-model-view-code-content",children:(0,E.FD)("div",{css:Ye.item,children:[(0,E.Y)(ge,{dangerouslySetAntdProps:{copyable:{text:this.loadModelCodeText(r,e)}},children:(0,E.FD)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,E.FD)("div",{className:"code",children:[(0,E.Y)("span",{className:"code-keyword",children:"import"})," mlflow","\n","logged_model = ",(0,E.Y)("span",{className:"code-string",children:`'${r}'`})]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"6bmLqb",defaultMessage:"Load model"})]}),"\n","loaded_model = mlflow.",e,".load_model(logged_model)"]}),(0,E.Y)("br",{})]})}),(0,E.Y)(v.A,{id:"bHuphj",defaultMessage:"See the documents below to learn how to customize this model and deploy it for batch or real-time scoring using the pyfunc model flavor."}),(0,E.FD)("ul",{children:[(0,E.Y)("li",{children:(0,E.Y)("a",{href:me.HC,children:"API reference for the mlflow.pyfunc module"})}),(0,E.Y)("li",{children:(0,E.Y)("a",{href:me.A6,children:"Creating custom Pyfunc models"})})]})]})})]})}renderPandasDataFramePrediction(e){return(0,E.FD)("div",{css:Ye.item,children:[(0,E.Y)(fe,{children:(0,E.Y)(v.A,{id:"GXayIF",defaultMessage:"Predict on a Pandas DataFrame:"})}),(0,E.Y)(ge,{dangerouslySetAntdProps:{copyable:{text:this.pandasDataFrameCodeText(e)}},children:(0,E.FD)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,E.FD)("div",{className:"code",children:[(0,E.Y)("span",{className:"code-keyword",children:"import"})," mlflow","\n","logged_model = ",(0,E.Y)("span",{className:"code-string",children:`'${e}'`})]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"kV2Dw/",defaultMessage:"Load model as a PyFuncModel."})]}),"\n","loaded_model = mlflow.pyfunc.load_model(logged_model)"]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"IKx3DN",defaultMessage:"Predict on a Pandas DataFrame."})]}),"\n",(0,E.Y)("span",{className:"code-keyword",children:"import"})," pandas ",(0,E.Y)("span",{className:"code-keyword",children:"as"})," pd","\n","loaded_model.predict(pd.DataFrame(data))"]})]})})]})}renderPyfuncCodeSnippet(){if("mlflow.spark"===this.state.loader_module)return this.renderMlflowSparkCodeSnippet();const{runUuid:e,path:t}=this.props,s=`runs:/${e}/${t}`;return(0,E.FD)(E.FK,{children:[(0,E.Y)(ve,{level:3,children:(0,E.Y)(v.A,{id:"r3/K3V",defaultMessage:"Make Predictions"})}),(0,E.FD)("div",{className:"artifact-logged-model-view-code-content",children:[(0,E.FD)("div",{css:Ye.item,children:[(0,E.Y)(fe,{children:(0,E.Y)(v.A,{id:"6xPc4W",defaultMessage:"Predict on a Spark DataFrame:"})}),(0,E.Y)(ge,{dangerouslySetAntdProps:{copyable:{text:this.sparkDataFrameCodeText(s)}},children:(0,E.FD)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",marginTop:10},children:[(0,E.FD)("div",{className:"code",children:[(0,E.Y)("span",{className:"code-keyword",children:"import"})," mlflow","\n",(0,E.Y)("span",{className:"code-keyword",children:"from"})," pyspark.sql.functions"," ",(0,E.Y)("span",{className:"code-keyword",children:"import"})," struct, col","\n","logged_model = ",(0,E.Y)("span",{className:"code-string",children:`'${s}'`})]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"O1rYVN",defaultMessage:"Load model as a Spark UDF. Override result_type if the model does not return double values."})]}),"\n","loaded_model = mlflow.pyfunc.spark_udf(spark, model_uri=logged_model, result_type='double')"]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"OEGyWZ",defaultMessage:"Predict on a Spark DataFrame."})]}),"\n","df.withColumn('predictions', loaded_model(struct(*map(col, df.columns))))"]})]})})]}),this.renderPandasDataFramePrediction(s)]})]})}renderMlflowSparkCodeSnippet(){const{runUuid:e,path:t}=this.props,s=`runs:/${e}/${t}`;return(0,E.FD)(E.FK,{children:[(0,E.Y)(ve,{level:3,children:(0,E.Y)(v.A,{id:"r3/K3V",defaultMessage:"Make Predictions"})}),(0,E.FD)("div",{className:"artifact-logged-model-view-code-content",children:[(0,E.Y)("div",{css:Ye.item,children:(0,E.Y)(ge,{dangerouslySetAntdProps:{copyable:{text:this.mlflowSparkCodeText(s)}},children:(0,E.FD)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap",marginTop:10},children:[(0,E.FD)("div",{className:"code",children:[(0,E.Y)("span",{className:"code-keyword",children:"import"})," mlflow","\n","logged_model = ",(0,E.Y)("span",{className:"code-string",children:`'${s}'`})]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"NFUJyk",defaultMessage:"Load model"})]}),"\n","loaded_model = mlflow.spark.load_model(logged_model)"]}),(0,E.Y)("br",{}),(0,E.FD)("div",{className:"code",children:[(0,E.FD)("span",{className:"code-comment",children:["# ",(0,E.Y)(v.A,{id:"ZGrkWk",defaultMessage:"Perform inference via model.transform()"})]}),"\n","loaded_model.transform(data)"]})]})})}),this.renderPandasDataFramePrediction(s)]})]})}render(){return this.state.loading?(0,E.Y)(Q.$,{className:"artifact-logged-model-view-loading"}):this.state.error?(0,E.Y)($.F,{className:"artifact-logged-model-view-error",description:(0,E.Y)(v.A,{id:"81+fJx",defaultMessage:"Couldn't load model information due to an error."})}):(0,E.Y)("div",{className:"ShowArtifactPage",children:(0,E.FD)("div",{className:"show-artifact-logged-model-view",children:[(0,E.FD)("div",{className:"artifact-logged-model-view-header",style:{marginTop:16,marginBottom:16,marginLeft:16},children:[(0,E.Y)(ve,{level:2,children:(0,E.Y)(v.A,{id:"z2Gyuw",defaultMessage:"MLflow Model"})}),"pyfunc"===this.state.flavor?(0,E.Y)(v.A,{id:"ySno61",defaultMessage:"The code snippets below demonstrate how to make predictions using the logged model."}):(0,E.Y)(v.A,{id:"25EUlg",defaultMessage:"The code snippets below demonstrate how to load the logged model."})," ",this.renderModelRegistryText()]}),(0,E.Y)("hr",{}),(0,E.FD)("div",{className:"artifact-logged-model-view-schema-table",style:{width:"45%",marginLeft:16,float:"left"},children:[(0,E.Y)(ve,{level:3,children:(0,E.Y)(v.A,{id:"27oNFE",defaultMessage:"Model schema"})}),(0,E.Y)("div",{className:"content",children:(0,E.Y)(fe,{children:(0,E.Y)(v.A,{id:"GAJL1v",defaultMessage:"Input and output schema for your model. <link>Learn more</link>",values:{link:e=>(0,E.Y)("a",{href:me.$L,target:"_blank",children:e})}})})}),(0,E.Y)("div",{style:{marginTop:12},children:(0,E.Y)(pe.i,{schema:{inputs:this.state.inputs,outputs:this.state.outputs},defaultExpandAllRows:!0})})]}),(0,E.Y)("div",{className:"artifact-logged-model-view-code-group",style:{width:"50%",marginRight:16,float:"right"},children:"pyfunc"===this.state.flavor?this.renderPyfuncCodeSnippet():this.renderNonPyfuncCodeSnippet()})]})})}fetchLoggedModelMetadata(){const e=(0,O.To)(`${this.props.path}/${p.eh}`,this.props.runUuid);this.props.getArtifact(e).then((e=>{const t=he().load(e);if(t.signature){const e=Array.isArray(t.signature.inputs)?t.signature.inputs:JSON.parse(t.signature.inputs||"[]"),s=Array.isArray(t.signature.outputs)?t.signature.outputs:JSON.parse(t.signature.outputs||"[]");this.setState({inputs:e,outputs:s})}else this.setState({inputs:"",outputs:""});t.flavors.mleap?this.setState({flavor:"mleap"}):t.flavors.python_function?this.setState({flavor:"pyfunc",loader_module:t.flavors.python_function.loader_module}):this.setState({flavor:Object.keys(t.flavors)[0]}),this.setState({loading:!1})})).catch((e=>{this.setState({error:e,loading:!1})}))}}ye.defaultProps={getArtifact:O.Y0},ye.getLearnModelRegistryLinkUrl=()=>me.gw;const Ye={item:{position:"relative",pre:{margin:0},".du-bois-light-typography-copy":{position:"absolute",top:0,right:0}}};var xe=ye;var Me=s.p+"static/media/warning.290a3b14118933547965e91ea61c5a61.svg",we=s(69869),Ae=s(88464),be=s(70618),Ce=s(9856),Se=s(54421),Re=s(14343),Ie=s(40555),ke=s(15230);var De={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},Ne={name:"bjn8wh",styles:"position:relative"},Te={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};const Fe=e=>{let{data:t,onClose:s}=e;const{theme:i}=(0,a.u)(),[n,o]=(0,d.useState)(!1);return(0,g.isUndefined)(t)?null:(0,E.FD)("div",{css:(0,r.AH)({display:"flex",height:"100%",flexDirection:"row-reverse",position:"relative",borderLeft:`1px solid ${i.colors.border}`},""),children:[n&&(0,E.Y)(r.mL,{styles:De}),(0,E.Y)(ke.ResizableBox,{width:200,height:void 0,axis:"x",resizeHandles:["w"],minConstraints:[200,150],maxConstraints:[500,150],onResizeStart:()=>o(!0),onResizeStop:()=>o(!1),handle:(0,E.Y)("div",{css:(0,r.AH)({width:i.spacing.xs,left:-i.spacing.xs/2,height:"100%",position:"absolute",top:0,cursor:"ew-resize","&:hover":{backgroundColor:i.colors.border,opacity:.5}},"")}),css:Ne,children:(0,E.FD)("div",{css:(0,r.AH)({padding:i.spacing.sm},""),children:[(0,E.FD)("div",{css:Te,children:[(0,E.Y)(a.T.Title,{level:5,children:(0,E.Y)(v.A,{id:"+dGAnC",defaultMessage:"Preview"})}),(0,E.Y)(a.B,{componentId:"mlflow.run.artifact_view.preview_close",onClick:()=>s(),icon:(0,E.Y)(a.C,{})})]}),!t&&(0,E.Y)(a.T.Text,{color:"secondary",children:(0,E.Y)(v.A,{id:"kjltRf",defaultMessage:"Click a cell to preview data"})}),(0,E.Y)(Ie.fX,{json:t})]})})]})};var _e={name:"7zbxzd",styles:"flex:1;overflow:hidden;display:flex;flex-direction:column"},Ue={name:"1pbmicl",styles:"overflow:auto;flex:1"},Le={name:"fmgtfw",styles:".table-header-icon-container{line-height:0;}"};const He=e=>{let{data:t,runUuid:s}=e;const[n,o]=(0,d.useState)([]),[l,c]=(0,d.useState)(!1),u=(0,Ae.A)(),{theme:h}=(0,a.u)(),m=160-2*h.spacing.sm,f=(0,d.useRef)(null),[y,Y]=(0,d.useState)({width:0,height:0});(0,d.useEffect)((()=>{if(f.current){const{width:e,height:t}=f.current.getBoundingClientRect();Y({width:e,height:t})}}),[]);const x=(0,d.useMemo)((()=>t.columns),[t]),[M,w]=(0,d.useState)([]),[A,b]=(0,d.useState)(void 0),C=(0,d.useMemo)((()=>t.data),[t]),S=(0,d.useMemo)((()=>C.length>0?x.filter(((e,t)=>{if(null!==C[0][t]&&"object"===typeof C[0][t]){const{type:e}=C[0][t];return e===p.Oe}return!1})):[]),[x,C]),R=(0,d.useMemo)((()=>{const e=1+(l?24:32);return S.length>0?Math.floor((y.height-e-48)/160):Math.floor((y.height-e-48)/e)}),[y,S,l]),[I,k]=(0,d.useState)({pageSize:1,pageIndex:0});(0,d.useEffect)((()=>{k((e=>({...e,pageSize:R})))}),[R]);const D=(0,d.useMemo)((()=>x.filter((e=>!M.includes(e))).map((e=>{const t=String(e);return S.includes(e)?{id:t,header:t,accessorKey:t,minSize:100,cell:e=>{try{const t=JSON.parse(e.getValue()),{filepath:r,compressed_filepath:i}=t,a=(0,O.To)(r,s),n=(0,O.To)(i,s);return(0,E.Y)(Se.TV,{imageUrl:a,compressedImageUrl:n,maxImageSize:m})}catch{return e.getValue()}}}:{id:t,header:t,accessorKey:t,minSize:100}}))),[x,m,S,s,M]),N=(0,d.useMemo)((()=>C.map((e=>{const t={};for(let s=0;s<x.length;s++){const r=e[s];t[x[s]]="string"===typeof r?r:JSON.stringify(r)}return t}))),[C,x]),T=(0,be.N4)({columns:D,data:N,state:{pagination:I,sorting:n},onSortingChange:o,getCoreRowModel:(0,Ce.HT)(),getSortedRowModel:(0,Ce.h5)(),getPaginationRowModel:(0,Ce.kW)(),enableColumnResizing:!0,columnResizeMode:"onChange"}),F=(0,E.Y)(i.dKS,{currentPageIndex:I.pageIndex+1,numTotal:C.length,onChange:(e,t)=>{k({pageSize:t||I.pageSize,pageIndex:e-1})},pageSize:I.pageSize});return(0,E.FD)("div",{ref:f,css:(0,r.AH)({paddingLeft:h.spacing.md,height:"100%",display:"flex",gap:h.spacing.xs,overflow:"hidden"},""),children:[(0,E.FD)("div",{css:_e,children:[(0,E.Y)("div",{css:Ue,children:(0,E.FD)(i.XIK,{scrollable:!0,size:l?"small":"default",css:Le,style:{width:T.getTotalSize()},children:[T.getHeaderGroups().map((e=>(0,E.Y)(i.Hjg,{isHeader:!0,children:e.headers.map(((e,t)=>(0,E.Y)(i.A0N,{sortable:!0,sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),style:{maxWidth:e.column.getSize()},children:(0,be.Kv)(e.column.columnDef.header,e.getContext())},e.id)))},e.id))),T.getRowModel().rows.map((e=>(0,E.Y)(i.Hjg,{children:e.getAllCells().map((e=>(0,E.Y)(i.nA6,{css:(0,r.AH)({maxHeight:160,"&:hover":{backgroundColor:h.colors.tableBackgroundSelectedHover,cursor:"pointer"}},""),onClick:()=>{b(String(e.getValue()))},tabIndex:0,onKeyDown:t=>{let{key:s}=t;"Enter"===s&&b(String(e.getValue()))},style:{maxWidth:e.column.getSize()},children:(0,be.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})}),(0,E.Y)("div",{css:(0,r.AH)({display:"flex",justifyContent:"flex-end",paddingBottom:h.spacing.sm,paddingTop:h.spacing.sm},""),children:F})]}),!(0,g.isUndefined)(A)&&(0,E.Y)(Fe,{data:A,onClose:()=>b(void 0)}),(0,E.FD)("div",{css:(0,r.AH)({paddingTop:h.spacing.sm,paddingRight:h.spacing.sm,display:"flex",flexDirection:"column",gap:h.spacing.xs},""),children:[(0,E.FD)(i.rId.Root,{modal:!1,children:[(0,E.Y)(i.m_M,{title:u.formatMessage({id:"NzRvyj",defaultMessage:"Table settings"}),useAsLabel:!0,children:(0,E.Y)(i.rId.Trigger,{asChild:!0,"aria-label":u.formatMessage({id:"NzRvyj",defaultMessage:"Table settings"}),children:(0,E.Y)(a.B,{componentId:"mlflow.run.artifact_view.table_settings",icon:(0,E.Y)(i.L64,{})})})}),(0,E.FD)(i.rId.Content,{side:"left",children:[(0,E.Y)(i.rId.Arrow,{}),(0,E.FD)(i.rId.CheckboxItem,{checked:l,onCheckedChange:c,children:[(0,E.Y)(i.rId.ItemIndicator,{}),(0,E.Y)(v.A,{id:"odkg7W",defaultMessage:"Compact view"})]}),(0,E.Y)(i.rId.Separator,{}),(0,E.FD)(i.rId.Group,{children:[(0,E.Y)(i.rId.Label,{children:(0,E.Y)(v.A,{id:"fMf88R",defaultMessage:"Columns"})}),x.map((e=>(0,E.FD)(i.rId.CheckboxItem,{onSelect:e=>e.preventDefault(),checked:!M.includes(e),onCheckedChange:()=>{w((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},children:[(0,E.Y)(i.rId.ItemIndicator,{}),e]},e)))]})]})]}),(0,E.Y)(Re.k,{onClick:()=>{b((()=>(0,g.isUndefined)(A)?"":void 0))},pressed:!(0,g.isUndefined)(A),componentId:"mlflow.run.artifact_view.preview_sidebar_toggle",icon:(0,E.Y)(i.CPw,{})})]})]})},Ee=d.memo((e=>{let{runUuid:t,path:s}=e;const[n,o]=(0,d.useState)(!0),[l,c]=(0,d.useState)(),[u,h]=(0,d.useState)(void 0),[p,m]=(0,d.useState)("");(0,d.useEffect)((()=>{o(!0);const e=(0,O.To)(s,t);(0,O.Y0)(e).then((e=>{o(!1),e&&"string"===typeof e?(m(e),c(void 0)):c(Error("Artifact is not a JSON file"))})).catch((e=>{c(e),o(!1)})),h(s)}),[s,t]);const g=(0,d.useMemo)((()=>(0,K.pt)(p)),[p]),{theme:f}=(0,a.u)(),y=e=>(0,E.Y)("div",{css:(0,r.AH)({padding:f.spacing.md},""),children:(0,E.Y)(i.SvL,{image:(0,E.Y)(a.q,{}),title:(0,E.Y)(v.A,{id:"hnhCDT",defaultMessage:"Error occurred"}),description:e})});return n||s!==u?(0,E.Y)("div",{css:(0,r.AH)({padding:f.spacing.md},""),children:(0,E.Y)(i.QvX,{lines:5})}):l?y(l.message):p?g?(0,E.Y)(He,{data:g,runUuid:t}):y((0,E.Y)(v.A,{id:"db+oaM",defaultMessage:"Unable to parse JSON file"})):y(null)}));class Pe extends d.Component{render(){if(this.props.path){const e=x(this.props.path);let t;const{modelVersions:s}=this.props;if(s){const[r]=s.filter((t=>t.source.endsWith(`artifacts/${e}`)));if(r){const{name:e,version:s}=r;t=we.fM.getModelVersionPageRoute(e,s)}}if(this.props.size>50*p.PE)return je();if(this.props.isDirectory){if(this.props.runTags&&(0,K.x1)(this.props.runTags).includes(this.props.path))return(0,E.Y)(xe,{runUuid:this.props.runUuid,path:this.props.path,artifactRootUri:this.props.artifactRootUri,registeredModelLink:t})}else{if(this.props.showArtifactLoggedTableView)return(0,E.Y)(Ee,{runUuid:this.props.runUuid,path:this.props.path});if(e){if(b.has(e.toLowerCase()))return(0,E.Y)(G,{runUuid:this.props.runUuid,path:this.props.path});if(k.has(e.toLowerCase()))return(0,E.Y)(ce,{runUuid:this.props.runUuid,path:this.props.path});if(C.has(e.toLowerCase()))return(0,E.Y)(ee,{runUuid:this.props.runUuid,path:this.props.path,size:this.props.size});if(R.has(e.toLowerCase()))return(0,E.Y)(re,{runUuid:this.props.runUuid,path:this.props.path});if(S.has(e.toLowerCase()))return(0,E.Y)(ne,{runUuid:this.props.runUuid,path:this.props.path});if(I.has(e.toLowerCase()))return(0,E.Y)(le,{runUuid:this.props.runUuid,path:this.props.path})}}}return Ve()}}var ze={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},Be={name:"173u6wr",styles:"width:64px;height:64px"};const Ve=()=>(0,E.Y)("div",{css:ze,children:(0,E.Y)(i.SvL,{image:(0,E.FD)(E.FK,{children:[(0,E.Y)("img",{alt:"Preview icon.",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABoCAYAAAAU9xXbAAAAAXNSR0IArs4c6QAADAlJREFUeAHtnQ90VmUdx/cPGIMFCvOkkcI0T5qdAtJFhgrnQAJSJytOlCGkic0594fBjDxCqQzGBuHCphUYJgQdKgsSF3LqcFBHefKIFh0dm8p/yBljc2xsfX4v977n7v2z9z733d29797nnvOc59/v9/ye5/t9/t/7bqkpPngqKirKqcYKH1TF91VI830NdQV7IKAJ6wGH/yMZfqtiamrqtsGDBz/gt3p5VZ+urq6PdnR0vGra9x1h3d3dbcXFxUfNCia7v3LlylQrBnpKtKKRAGFNWAKQZK2iJsyKRgKENWEJQJK1ipowKxoJENaEJQBJ1iq6vq2vqqoa39nZ+bjVaITwGLbzZvIMtrJ7zUgS+FuWLFlSY7edrhPGwW8EZNxot0LI5SCfoyCf0KJcFLys0gA9Jaqg5QPZ/hhh1pP6UXpUoQ/a7XUV7mQWuc1JJVwnLC0trfv8+fNm3c4wX//WjCSrzxo9yWnb9ZToFDmP9DRhHgHv1KwmzClyHulpwjwC3qlZTZhT5DzS04R5BLxTs5owp8h5pKcJ8wh4p2Y1YU6R80hPE+YR8E7NasKcIueRnibMI+CdmtWEOUXOIz1NmEfAOzXr+usV3jhb34c5rWdEvTVr1ozk/dqQiJkeJNLWjpKSkv+6adp1wkLeh/VpW9rb25+hwFl9WmgchdF5/o769XEUEVNVT4kxIfKXgCbMX3zErI0mLCZE/hJwfQ1zc9MBlK/jhvkFUtawg27XxXXC3Nx0lJeXP+g2QH4rX0+JfmMkRn00YTEA8lu2JsxvjMSoT5+vYVu3bk0/fPjwFfwAIpevW3P5iHSypQ45q1at+gEbkYb09PRDLNJvL1q06JQlXwdjINAnhEHClZAwHQKmNzQ0TMXmR6LYvQi5RyXP/BqYP6ryH6J16L6Av4cvg89Ivn4iI+CYsHXr1g3haugbAF8ACXlSPCMqspXeU68m+2p078P/kM+YN0NezeLFi4N/6qB39eTKVSassrJyGASVtbW1fR+QL4kCVyegHyD/XfxTuJPInSU+CjeauPyc6BrCY0L0M0lbIA7iXkLuEYjbGSKT1FElwpi+vglZlRGATgFcufjcjr9vxIgR+xcuXNgaC1lIGYP8JMq8Gdk5uODvwrAxCbcDmzv4QytF3IK/Fau8ZMi3RRigXQ4Ym3A3AaIVl5MAvpENxEY2D29aM+yEWa/eQ26buNra2uLm5uYZhGWEfRnf3MHOOnfu3DTIfYzR9mPsdZGXtE9MwgBqGgBuBqFRFpRaAK6KeFVfbRIYkR2U95w4OsinKb8CuzMNm4MJL2Nzc2NNTc3cgoKC00Z60nlmL47YcNmCA9TzZAbJAsinMzMzr4KoZX1FVqhxrpxep+xZXGvdgr3g/Rx1mdbS0vLq6tWrJ4bqJEs8KmGMrNWsLbIFN2X+R3guQM4vKio63h8AMQX+FdKEnI0We5dzxnuR+t1gSUuaoElGjwYzJa2gN5daEl9jnfosPX+LJa1fgmVlZWexu4CRdgeu3TAq57xdyTjSwtYweu5DkCV/ITTwAFJ9dnb2rfn5+e+baXZ9ypI/5zCbMj6JTjbuGOG9TKm7CwsLTfBtFcfI/jXlnUD497gsyh3JSKujc02G0DdsFTIAhHqMMBr/Jdq03NKuvUOHDp2mSlZ1dfXFgPtzymnErQfcQpzs/h5kmt3BGa6B9XGexY6tIKTVZWRkyE6yxVC4iA6wTc6GtgoYAEJBwgD4MtqzCVDNr5z+DRgzGQmydtl+AG8c2/BXKOcuXHokRdIvg7insfnTSPm9pXF8+Bv5X8cFtveUdQ23Let70xlIeQHCaHQqTrbu5sFVtu2306PPqDRWejrg/Qmdq+zoYTMf0pRfQjIF7mIz8rDFxjzKudMSH7DBAGFMT3fQwpvMVkLWAsj6lxm36zNqFiF7rV15Q+5hNg9XKOqksBmRHewfTT3Ir+R+M9qlsymW8H7ahg0bMmlF4AZdWiNrAmQp/y0Nea2CeoGUofIA9BA2D/eq6Igs9exmlN2Db84COa2trcqjVdWu1/IZJ06cKAa0jxsgtLF9L3NSqaamps9RzmgnuujIRkIZbM5px9goPYLuSsNuEfEnmDLfMeJBj+n6q0zXE4IJ7gSOYPsJd4q+UGoGIAe38IQrWdSbnBgEjHFO9AydsU51c3Nz1x46dOhu6v4Jyshk1N2PH9bpmK5nk77AqR07eox2uQB3lTBZw4JnMQy22qlYJBmAMneXkbJ7TcNuYC3tVSh6pvxdpOCZDuKC7Ymukrg5AtRaS/WX8gODSy1xlWDYNKSg7GhUS/mNjY33QtJ1hq1Ozmmu9nCFNrkimkbvrsDJDYK8Mc7mDLXCiSXegdVTTrMTXXTk8wDlRw7o1PlHpiL2f1ZaWiqfHIQ9yPV4LxQmkCAJGXLWYqFeRn3Nw+c84pvlrKPSBnk9wvHgSXBZrKKHrIyKWkWdgDj/MaEGexcbuh+wYVoerRxsrGcd2xktvy/S6TDK13eqdgPzfV5e3lP19fWycE/AYTf1WabGifyHhkaVAgHkMeTlFiLXrh62KqONit7K4KAs111zTRnW0Id6+wKLvH8gKy6hH1nDUqZMmSLfYMwhGLiGkl7LBzbbjTOa7QYyKj+gJ8tl7xGbSs+yNf+hTdmgGDPAF6ljlZmAveco53EzPpD9AGHSQBr8Nt73LI0dzxlNmTR68puUcT3ud5ayQoPvA3IxBH8bX+mVv/FKRW7sA7MD+k28TZgfamCgxoOESQMBcCsABHeN9OIZx48f36F6G866KAfI2xltn2KqWkrRz+D+QLiWdeY7hMchE7RD3NZDPSZxK7Ib4VGGQiv+HNW3CbaM+VQo7MzCSCth8zAcsu426jyVtekF0r5G3jGVdhijTUZc3A/2Z3I4/w0FDZfC6FhtdIDZ3CnWx114AhXQY4QZQHRDzD2EN5rtgLwv4F4DtFvNtP7yuaMczAajCvvyFiBAFv6HuK9A1ov9VQ+/2AkjTCpG7+1myrqL4E/MigLYJbidLPjVAJhtprvp808KPsOn3/uwW4Izb1JOM63Oon51btr2a9kRCZPKQloX61ARwbmEz0qaAVoxQXlj/ID0fknv64cjxVg6xibjP9NNtJS/n/CEZBxZJgZRCTMFIG0La8XnIe2AmQZxo1nX1tL7DwJsOTcOHzPz4vHpBJMp7xccKQ5SjryjC9RPRjxufVZWlny/8U48NhJdN2zTEalB9OgDe/bsGc/hOp/85RA20pAbi7+C66xHAfovhLfj9jFdvQHAMbfrxtR6Azo3475FJ7gSP/R5hSnwfjYwMrqS/rFFmKAkh2s8Xuqu28xHNMsgbT7xLJw8MhKmGy6FkSLXXfsh7V3STuHkk+5WdOTuL4ewvDeTH0Nchx9tlL+FnPwY4lf4A+IekLbG/dgmzLTERzknCd/HOrOUqeu7gJkP8D1GBnHZlEzFN9V6/BTJmh4UuBCQUflnpuAaRvUuIYrRGiKS3FFlwky4uGdsJlwN+Gu5fchjOguMMOIyxamUexpiduPq0H0egt4TG4ws8fQTgoAKsCGqF6IALaPiJcMtlw9hmDKvBfxcRor8bDYPd5tII3uG8C/xG8SR38DFr3xOF3O9E339qI0EW3gZ3zG+jLC4FK6TbuGGIkAYZB01jgrBsthMBMM6EBuBaAt+bE0t4QkCmjBPYHduVBPmHDtPNDVhnsDu3KgmzDl2nmjGva2PVWvOZ+YteyxR5XxuVKaz85R3ZL54qMs/2QVPcbMyrhPGWcv6PzD7ui3y5bJ5r9nXZSuXx3lyuLKSooKeEhUB81pcE+Y1A4r2XZ8S3VzDmA7bmYaUvjNRxEdV/LSqgqq864S5uYZxUSxfUF2q2uhEltdTYoKxpwnThCUYAglWXdfXMDc3HQmGdcTqsnEq5XOK0oiZJJLfI8v1KVE2HT0s6khcCLhOWFy108phCOgpMQyS/k1gBqodNGhQ1B8ihtbGdcLcPIeFNiYR46xRLXzQdNRu3fWUaBcpn8hpwnxChN1qaMLsIuUTOU2YT4iwWw3XNx0hB+eMOP5wi902+V6On1ENCz0Q262064SF7BJz+R7/iN3KablwBPSUGI6Jr1M0Yb6mJ7xy/wev2Hz8hVYQCwAAAABJRU5ErkJggg==",css:Be}),(0,E.Y)(F.S,{size:"sm"})]}),title:(0,E.Y)(v.A,{id:"6b6fTN",defaultMessage:"Select a file to preview"}),description:(0,E.Y)(v.A,{id:"2Exf7S",defaultMessage:"Supported formats: image, text, html, pdf, geojson files"})})});var Ke={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},Oe={name:"173u6wr",styles:"width:64px;height:64px"};const je=()=>(0,E.Y)("div",{css:Ke,children:(0,E.Y)(i.SvL,{image:(0,E.FD)(E.FK,{children:[(0,E.Y)("img",{alt:"Preview icon.",src:Me,css:Oe}),(0,E.Y)(F.S,{size:"sm"})]}),title:(0,E.Y)(v.A,{id:"9y+yUQ",defaultMessage:"File is too large to preview"}),description:(0,E.Y)(v.A,{id:"Xga8xn",defaultMessage:"Maximum file size for preview: 50MB"})})});var We=Pe,qe=s(81866),Ge=s(72877),Je=s(65871),Xe=s(26809),Qe=s(90725),$e=s(34860);const Ze=e=>{let{data:t,onToggleTreebeard:s}=e;const{theme:r}=(0,a.u)(),i=(0,d.useMemo)((()=>et(r)),[r]);return(0,E.Y)(Qe.Treebeard,{data:t,onToggle:s,style:i,decorators:Qe.decorators})};Qe.decorators.Header=e=>{let t,{style:s,node:r}=e;if(r.children)t="folder";else{const e=x(r.name);t=b.has(e)?"file-image-o":k.has(e)?"file-excel-o":C.has(e)?"file-code-o":"file-text-o"}const i=`fa fa-${t}`,a=r.children?{marginRight:"5px"}:{marginRight:"5px",marginLeft:"19px"};return(0,E.Y)("div",{style:s.base,"data-test-id":"artifact-tree-node","artifact-name":r.name,"aria-label":r.name,children:(0,E.FD)("div",{style:s.title,children:[(0,E.Y)("i",{className:i,style:a}),r.name]})})},Qe.decorators.Loading=e=>{let{style:t}=e;return(0,E.FD)("div",{style:t,children:[(0,E.Y)("img",{alt:"",className:"loading-spinner",src:$e}),(0,E.Y)(v.A,{id:"RlRsah",defaultMessage:"loading..."})]})};const et=e=>({tree:{base:{listStyle:"none",margin:0,padding:0,backgroundColor:e.colors.backgroundPrimary,color:e.colors.textPrimary,fontSize:e.typography.fontSizeMd,maxWidth:"500px",height:"100%",overflow:"scroll"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:e.isDarkMode?e.colors.grey700:e.colors.grey300},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-12px 0 0 -4px",height:"14px"},height:7,width:7,arrow:{fill:"#7a7a7a",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:e.colors.textPrimary},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"19px"}}}});var tt=s(56412);const{Text:st}=a.T;var rt={name:"ou8xsw",styles:"flex:0 0 auto"},it={name:"1l0i7xs",styles:"flex:1 1;overflow:hidden"},at={name:"i3oi5p",styles:"flex:0 1"};class nt extends d.Component{constructor(){super(...arguments),this.state={activeNodeId:void 0,toggledNodeIds:{},requestedNodeIds:new Set,viewAsTable:!0},this.onToggleTreebeard=(e,t)=>{const{id:s,loading:r}=e,i=new Set(this.state.requestedNodeIds);r&&!this.state.requestedNodeIds.has(s)&&this.props.listArtifactsApi(this.props.runUuid,s),this.setState({activeNodeId:s,toggledNodeIds:{...this.state.toggledNodeIds,[s]:t},requestedNodeIds:i})},this.getTreebeardData=e=>{const{isRoot:t}=e;if(t){if(e.children)return Object.values(e.children).map((e=>this.getTreebeardData(e)));throw Error("unreachable code.")}let s,r,i,a,n;if(e.fileInfo){const{path:t}=e.fileInfo;s=t,r=(e=>{const t=e.split("/");return t[t.length-1]})(t)}const o=this.state.toggledNodeIds[s];o&&(i=o),e.children&&(a=Object.values(e.children).map((e=>this.getTreebeardData(e)))),this.state.activeNodeId===s&&(n=!0);return{id:s,name:r,toggled:i,children:a,active:n,loading:void 0!==e.children&&!e.isLoaded}}}getExistingModelVersions(){const{modelVersionsBySource:e}=this.props;return e[h.A.normalize(this.getActiveNodeRealPath())]}renderRegisterModelButton(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state,s=this.getActiveNodeRealPath();return(0,E.Y)(V,{runUuid:e,modelPath:s,modelRelativePath:String(t),disabled:void 0===t,showButton:!0,buttonType:void 0})}renderModelVersionInfoSection(e){return(0,E.Y)(dt,{modelVersion:f().last(e)})}renderPathAndSizeInfo(){const e=D.x.findChild(this.props.artifactNode,this.state.activeNodeId),t=this.getActiveNodeRealPath();return(0,E.FD)("div",{className:"artifact-info-left",children:[(0,E.FD)("div",{className:"artifact-info-path",children:[(0,E.Y)("label",{children:(0,E.Y)(v.A,{id:"axF2gD",defaultMessage:"Full Path:"})})," ",(0,E.Y)(st,{className:"artifact-info-text",ellipsis:!0,copyable:!0,children:t})]}),!1===e.fileInfo.is_dir?(0,E.FD)("div",{className:"artifact-info-size",children:[(0,E.Y)("label",{children:(0,E.Y)(v.A,{id:"mpHsCg",defaultMessage:"Size:"})})," ",T()(this.getActiveNodeSize())]}):null]})}renderSizeInfo(){const e=D.x.findChild(this.props.artifactNode,this.state.activeNodeId),{theme:t}=this.props.designSystemThemeApi;return(0,E.FD)("div",{style:{display:"flex",alignItems:"center",gap:t.spacing.sm,overflow:"hidden",textOverflow:"ellipsis"},children:[(0,E.Y)(a.T.Text,{bold:!0,size:"lg",ellipsis:!0,title:this.state.activeNodeId,children:this.state.activeNodeId}),!1===e.fileInfo.is_dir&&(0,E.Y)(a.T.Text,{color:"secondary",children:T()(this.getActiveNodeSize())})]})}renderPathInfo(){const e=this.getActiveNodeRealPath(),{theme:t}=this.props.designSystemThemeApi;return(0,E.FD)("div",{css:(0,r.AH)({display:"flex",overflow:"hidden",alignItems:"center",gap:t.spacing.sm},""),children:[(0,E.FD)("div",{css:(0,r.AH)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"0 auto",color:t.colors.textSecondary},""),title:e,children:[(0,E.Y)(v.A,{id:"YZDyOo",defaultMessage:"Path:"})," ",e]}),(0,E.Y)(tt.i,{css:rt,showLabel:!1,size:"small",type:"tertiary",copyText:e,icon:(0,E.Y)(i.TdU,{})})]})}onDownloadClick(e,t){window.location.href=(0,O.To)(t,e)}renderControls(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state;return(0,E.Y)("div",{style:{display:"flex",alignItems:"flex-start"},children:(0,E.FD)("div",{style:{display:"inline-flex",alignItems:"center"},children:[this.shouldShowViewAsTableCheckbox&&(0,E.Y)(i.Sc0,{isChecked:this.state.viewAsTable,onChange:()=>this.setState({viewAsTable:!this.state.viewAsTable}),children:(0,E.Y)(v.A,{id:"zv4Ycc",defaultMessage:"View as table"})}),(0,E.Y)(i.m_M,{arrowPointAtCenter:!0,placement:"topLeft",title:this.props.intl.formatMessage({id:"Y9ZFyN",defaultMessage:"Download artifact"}),children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_337",icon:(0,E.Y)(i.s3U,{}),onClick:()=>this.onDownloadClick(e,t)})})]})})}renderArtifactInfo(){const e=this.getExistingModelVersions();let t;t=e&&h.A.isModelRegistryEnabled()?this.renderModelVersionInfoSection(e):this.activeNodeCanBeRegistered()&&h.A.isModelRegistryEnabled()?this.renderRegisterModelButton():this.activeNodeIsDirectory()?null:this.renderControls();const{theme:s}=this.props.designSystemThemeApi;return(0,E.FD)("div",{css:(0,r.AH)({padding:`${s.spacing.xs}px ${s.spacing.sm}px ${s.spacing.sm}px ${s.spacing.md}px`,display:"flex",flexDirection:"column",gap:s.spacing.xs},""),children:[(0,E.FD)("div",{css:(0,r.AH)({whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",alignItems:"center",gap:s.spacing.md},""),children:[(0,E.Y)("div",{css:it,children:this.renderSizeInfo()}),(0,E.Y)("div",{css:at,children:t})]}),this.renderPathInfo()]})}getActiveNodeRealPath(){return this.state.activeNodeId?`${this.props.artifactRootUri}/${this.state.activeNodeId}`:this.props.artifactRootUri}getActiveNodeSize(){if(this.state.activeNodeId){const e=D.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.file_size||"0";return parseInt(e,10)}return 0}activeNodeIsDirectory(){if(this.state.activeNodeId){return D.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.is_dir}return!0}activeNodeCanBeRegistered(){if(this.state.activeNodeId){const e=D.x.findChild(this.props.artifactNode,this.state.activeNodeId);if(e&&e.children&&p.eh in e.children)return!0}return!1}componentDidUpdate(e,t){const{activeNodeId:s}=this.state;t.activeNodeId!==s&&this.props.handleActiveNodeChange(this.activeNodeIsDirectory())}componentDidMount(){if(this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");if(t)try{D.x.findChild(this.props.artifactNode,this.props.initialSelectedArtifactPath)}catch(e){return void console.error(e)}let s="";const r={activeNodeId:this.props.initialSelectedArtifactPath,toggledNodeIds:{}};t.forEach((e=>{s+=e,r.toggledNodeIds[s]=!0,s+="/"})),this.setArtifactState(r)}}setArtifactState(e){this.setState(e)}get shouldShowViewAsTableCheckbox(){return this.state.activeNodeId&&this.props.runTags&&(0,K.L9)(this.props.runTags).includes(this.state.activeNodeId)}render(){if(D.x.isEmpty(this.props.artifactNode))return(0,E.Y)(ct,{useAutoHeight:this.props.useAutoHeight});const{theme:e}=this.props.designSystemThemeApi;return(0,E.FD)("div",{className:"artifact-view",css:(0,r.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0,[e.responsive.mediaQueries.xs]:{overflowX:"auto"}},""),children:[(0,E.Y)("div",{style:{minWidth:"200px",maxWidth:"400px",flex:1,whiteSpace:"nowrap",borderRight:`1px solid ${e.colors.borderDecorative}`},children:(0,E.Y)(Ze,{data:this.getTreebeardData(this.props.artifactNode),onToggleTreebeard:this.onToggleTreebeard})}),(0,E.FD)("div",{className:"artifact-right",children:[this.state.activeNodeId?this.renderArtifactInfo():null,(0,E.Y)(We,{runUuid:this.props.runUuid,path:this.state.activeNodeId,isDirectory:this.activeNodeIsDirectory(),size:this.getActiveNodeSize(),runTags:this.props.runTags,artifactRootUri:this.props.artifactRootUri,modelVersions:this.props.modelVersions,showArtifactLoggedTableView:this.state.viewAsTable&&this.shouldShowViewAsTableCheckbox})]})]})}}const ot={listArtifactsApi:Xe.cN},lt=(0,n.Ng)(((e,t)=>{const{runUuid:s}=t,{apis:r}=e,i=(0,Ge.ej)(s,e),a=(0,Ge.vb)(s,e),n=(0,Je.U_)(e),o=f().flatMap(n,(e=>({...e,source:h.A.normalize(e.source)})));return{artifactNode:i,artifactRootUri:a,modelVersions:n,modelVersionsBySource:f().groupBy(o,"source"),apis:r}}),ot)((0,a.W)((0,Y.Ay)(nt)));function dt(e){const{modelVersion:t}=e,{name:s,version:r,status:a,status_message:n}=t;let o=we.fM.getModelVersionPageRoute(s,r);const l=(0,E.Y)(i.m_M,{title:`${s} version ${r}`,children:(0,E.FD)(u.N_,{to:o,className:"model-version-link",target:"_blank",rel:"noreferrer",children:[(0,E.Y)("span",{className:"model-name",children:s}),(0,E.FD)("span",{children:[",\xa0v",r,"\xa0"]}),(0,E.Y)("i",{className:"fas fa-external-link-o"})]})});return(0,E.FD)("div",{className:"model-version-info",children:[(0,E.FD)("div",{className:"model-version-link-section",children:[(0,E.Y)(i.m_M,{title:n||qe.zr[a],children:(0,E.Y)("div",{children:qe.UA[a]})}),l]}),(0,E.Y)("div",{className:"model-version-status-text",children:a===qe.IP.READY?(0,E.Y)(d.Fragment,{children:(0,E.Y)(v.A,{id:"nVndit",defaultMessage:"Registered on {registeredDate}",values:{registeredDate:h.A.formatTimestamp(t.creation_timestamp,"yyyy/mm/dd")}})}):n||qe.zA[a]})]})}function ct(e){let{useAutoHeight:t}=e;const{theme:s}=(0,a.u)();return(0,E.Y)("div",{css:(0,r.AH)({flex:t?1:"unset",height:t?"auto":void 0,paddingTop:s.spacing.md,display:"flex",justifyContent:"center",alignItems:"center"},""),children:(0,E.Y)(i.SvL,{image:(0,E.Y)(i.BfH,{}),title:(0,E.Y)(v.A,{id:"X3F7x3",defaultMessage:"No Artifacts Recorded"}),description:(0,E.Y)(v.A,{id:"3geT+I",defaultMessage:"Use the log artifact APIs to store file outputs from MLflow runs."})})})}var ut=s(3769);class ht extends d.Component{constructor(){super(...arguments),this.pollIntervalId=void 0,this.getFailedtoListArtifactsMsg=()=>(0,E.Y)("span",{children:(0,E.Y)(v.A,{id:"V4CsL/",defaultMessage:"Unable to list artifacts stored under {artifactUri} for the current run. Please contact your tracking server administrator to notify them of this error, which can happen when the tracking server lacks permission to list artifacts under the current run's root artifact directory.",values:{artifactUri:this.props.artifactRootUri}})}),this.state={activeNodeIsDirectory:!1,errorThrown:!1},this.searchRequestId=(0,L.yk)(),this.listArtifactRequestIds=[(0,L.yk)()].concat(this.props.initialSelectedArtifactPath?this.props.initialSelectedArtifactPath.split("/").map((e=>(0,L.yk)())):[]),this.pollModelVersionsForCurrentRun=async()=>{const{apis:e,runUuid:t}=this.props,{activeNodeIsDirectory:s}=this.state,r=e[this.searchRequestId];if(s&&(!r||!r.active))try{await this.props.searchModelVersionsApi({run_id:t},this.searchRequestId)}catch(i){if(!this.state.errorThrown){const e=`Error while fetching model version for run: ${i instanceof Error?i.toString():JSON.stringify(i)}`;h.A.logErrorAndNotifyUser(e),this.setState({errorThrown:!0})}}},this.handleActiveNodeChange=e=>{this.setState({activeNodeIsDirectory:e})},this.pollArtifactsForCurrentRun=async()=>{const{runUuid:e}=this.props;if(await this.props.listArtifactsApi(e,void 0,this.listArtifactRequestIds[0]),this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");let s="";for(let r=0;r<t.length;r++)s+=t[r],await this.props.listArtifactsApi(e,s,this.listArtifactRequestIds[r+1]),s+="/"}},this.renderErrorCondition=e=>e,this.renderArtifactView=(e,t,s)=>{if(e)return(0,E.Y)(Q.d,{});if(this.renderErrorCondition(t)){const e=s[0];return e&&e.error&&console.error(e.error),(0,E.Y)($.F,{css:(0,r.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0},""),"data-testid":"artifact-view-error",description:this.getFailedtoListArtifactsMsg()})}return(0,E.Y)(lt,{...this.props,handleActiveNodeChange:this.handleActiveNodeChange,useAutoHeight:this.props.useAutoHeight})}}componentDidMount(){h.A.isModelRegistryEnabled()&&(this.pollModelVersionsForCurrentRun(),this.pollIntervalId=setInterval(this.pollModelVersionsForCurrentRun,qe.Gs)),this.pollArtifactsForCurrentRun()}componentDidUpdate(e){e.runUuid!==this.props.runUuid&&this.setState({errorThrown:!1})}componentWillUnmount(){h.A.isModelRegistryEnabled()&&clearInterval(this.pollIntervalId)}render(){return(0,E.Y)(ut.Ay,{requestIds:this.listArtifactRequestIds,children:this.renderArtifactView})}}const pt={listArtifactsApi:Xe.cN,searchModelVersionsApi:U.hY},mt=(0,n.Ng)(((e,t)=>{const{runUuid:s,location:r}=t,i=((null===r||void 0===r?void 0:r.pathname)||"").match(/\/(?:artifactPath|artifacts)\/(.+)/),a=(null===i||void 0===i?void 0:i[1])||void 0,{apis:n}=e,o=(0,Ge.vb)(s,e);let l=a;if(!l){const e=(0,K.x1)(t.runTags);e.length>0&&(l=f().first(e))}return{artifactRootUri:o,apis:n,initialSelectedArtifactPath:l}}),pt)(ht);var gt=(0,y.h)(mt),ft=s(53606);const vt=e=>{let{runTags:t,experimentId:s,runUuid:i}=e;const{theme:n}=(0,a.u)(),o=(0,ft.U)(`(min-width: ${n.responsive.breakpoints.sm}px)`);return(0,E.Y)("div",{css:(0,r.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:n.spacing.md,position:"relative"},""),children:(0,E.Y)(gt,{runUuid:i,runTags:t,useAutoHeight:o})})};var yt=s(79085),Yt=s(58481);const xt=()=>{const{"*":e}=(0,u.g)();return"model-metrics"===e?p.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?p.N3.SYSTEM_METRIC_CHARTS:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?p.N3.ARTIFACTS:p.N3.OVERVIEW},Mt=()=>{const{experimentId:e,runUuid:t}=(0,u.g)(),s=(0,u.Zp)(),r=xt(),[a,n]=(0,d.useState)(r===p.N3.ARTIFACTS);return(0,E.FD)(i.tUM,{activeKey:r,onChange:i=>{e&&t&&r!==i&&(n(i===p.N3.ARTIFACTS),i!==p.N3.OVERVIEW?s(Yt.h.getRunPageTabRoute(e,t,i)):s(Yt.h.getRunPageRoute(e,t)))},tabBarStyle:{margin:a&&"0px"},children:[(0,E.Y)(i.tUM.TabPane,{tab:(0,E.Y)(v.A,{id:"kA+QJr",defaultMessage:"Overview"})},p.N3.OVERVIEW),(0,E.Y)(i.tUM.TabPane,{tab:(0,E.Y)(v.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},p.N3.MODEL_METRIC_CHARTS),(0,E.Y)(i.tUM.TabPane,{tab:(0,E.Y)(v.A,{id:"hFlaPP",defaultMessage:"System metrics"})},p.N3.SYSTEM_METRIC_CHARTS),(0,E.Y)(i.tUM.TabPane,{tab:(0,E.Y)(v.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},p.N3.ARTIFACTS)]})};var wt=s(21317);var At={name:"s5xdrg",styles:"display:flex;align-items:center"},bt={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function Ct(e){let{models:t,onRegisterClick:s,experimentId:n,runUuid:o}=e;const{theme:l}=(0,a.u)(),d=(e,t)=>(0,E.FD)(i.rId.Group,{children:[(0,E.Y)(i.rId.Label,{children:e}),t.map((e=>{const t=(0,g.first)(e.registeredVersions);if(!t)return(0,E.FD)(i.rId.Item,{onClick:()=>s(e),children:[(0,E.Y)("div",{css:(0,r.AH)({marginRight:l.spacing.md},""),children:(0,g.last)(e.path.split("/"))}),(0,E.Y)(i.rId.HintColumn,{children:(0,E.Y)(u.N_,{target:"_blank",to:Yt.h.getRunPageTabRoute(n,o,"artifacts/"+e.path),children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,E.Y)(a.V,{}),children:(0,E.Y)(v.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,name:c,version:h}=t;return(0,E.Y)(u.N_,{target:"_blank",to:St(t),children:(0,E.FD)(i.rId.Item,{children:[(0,E.Y)(i.rId.IconWrapper,{css:At,children:"READY"===d?(0,E.Y)(wt.h,{}):qe.UA[d]}),(0,E.FD)("span",{css:(0,r.AH)({marginRight:l.spacing.md},""),children:[c,(0,E.FD)(i.vwO,{css:bt,children:["v",h]})]}),(0,E.Y)(i.rId.HintColumn,{children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,E.Y)(a.V,{}),children:(0,E.Y)(v.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),c=t.filter((e=>e.registeredVersions.length>0)),h=t.filter((e=>!e.registeredVersions.length));return(0,E.FD)(E.FK,{children:[h.length?d("Unregistered models",h):null,h.length&&c.length?(0,E.Y)(i.rId.Separator,{}):null,c.length?d("Registered models",c):null]})}const St=e=>{const{name:t,version:s}=e;return we.fM.getModelVersionPageRoute(t,s)},Rt=e=>{let{runUuid:t,experimentId:s}=e;const{theme:o}=(0,a.u)(),l=(0,n.d4)((e=>e.entities.tagsByRunUuid[t])),c=(0,n.d4)((e=>(0,Ge.vb)(t,e))),p=(0,n.d4)((e=>(0,g.orderBy)(e.entities.modelVersionsByRunUuid[t]))),m=(0,d.useMemo)((()=>l?h.A.getLoggedModelsFromTags(l).map((e=>{let{artifactPath:t}=e;return t})):[]),[l]),f=(0,d.useMemo)((()=>(0,g.orderBy)(m.map((e=>({path:e,absolutePath:`${c}/${e}`,registeredVersions:(null===p||void 0===p?void 0:p.filter((t=>{let{source:s}=t;return s===`${c}/${e}`})))||[]}))),(e=>{var t;return parseInt((null===(t=e.registeredVersions[0])||void 0===t?void 0:t.version)||"0",10)}),"desc")),[m,p,c]),[y,Y]=(0,d.useState)(null);if(f.length>1){const e=f.filter((e=>e.registeredVersions.length>0));return(0,E.FD)(E.FK,{children:[y&&(0,E.Y)(V,{runUuid:t,modelPath:y.absolutePath,modelRelativePath:y.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>Y(null)}),(0,E.FD)(i.rId.Root,{modal:!1,children:[(0,E.Y)(i.m_M,{placement:"bottom",title:(0,E.Y)(v.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:e.length,loggedCount:f.length}}),children:(0,E.Y)(i.rId.Trigger,{asChild:!0,children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,E.Y)(i.D3D,{}),children:(0,E.Y)(v.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,E.Y)(i.rId.Content,{align:"end",children:(0,E.Y)(Ct,{models:f,onRegisterClick:Y,experimentId:s,runUuid:t})})]})]})}const x=(0,g.first)(f);if(!x)return null;const M=(0,g.first)(x.registeredVersions);return M?(0,E.Y)(u.N_,{to:St(M),target:"_blank",css:(0,r.AH)({marginLeft:o.spacing.sm},""),children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,E.Y)(a.V,{}),type:"link",children:"Model registered"})}):(0,E.Y)(V,{disabled:!1,runUuid:t,modelPath:x.absolutePath,modelRelativePath:x.path,showButton:!0,buttonType:"primary"})};var It={name:"ozd7xs",styles:"flex-shrink:0"};const kt=e=>{let{hasComparedExperimentsBefore:t,comparedExperimentIds:s=[],experiment:r,runDisplayName:i,runTags:a,runParams:n,runUuid:o,handleRenameRunClick:l,handleDeleteRunClick:d}=e;const c=[t&&s?(0,E.Y)(u.N_,{to:Yt.h.getCompareExperimentsPageRoute(s),children:(0,E.Y)(v.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:s.length}})}):(0,E.Y)(u.N_,{to:Yt.h.getExperimentPageRoute(r.experimentId),"data-test-id":"experiment-runs-link",children:r.name})];return(0,E.FD)("div",{css:It,children:[(0,E.FD)(yt.z,{title:(0,E.Y)("span",{"data-test-id":"runs-header",children:i}),breadcrumbs:c,children:[(0,E.Y)(yt.o,{menu:[{id:"overflow-rename-button",onClick:l,itemName:(0,E.Y)(v.A,{id:"fv7vQf",defaultMessage:"Rename"})},...d?[{id:"overflow-delete-button",onClick:d,itemName:(0,E.Y)(v.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(0,E.Y)(Rt,{runUuid:o,experimentId:r.experimentId})]}),(0,E.Y)(Mt,{})]})};var Dt=s(69526),Nt=s(915),Tt=s(32039),Ft=s(32614);const _t="ChartOrder";var Ut=s(75627),Lt=s(59397);const Ht=e=>{var t;let{contextData:{runInfo:s,metricsForRun:r},hoverData:i,chartData:{metricKey:a},isHovering:n,mode:o}=e;const l=(0,Ut.bL)(i)?i.hoveredDataPoint:i;if(o===Ut.QS.MultipleTracesWithScanline&&(0,Ut.bL)(i)&&n)return(0,E.Y)(Lt.G,{hoverData:i});if(null===l||void 0===l||!l.metricEntity)return null;const{timestamp:d,step:c,value:u}=l.metricEntity,p=(null===r||void 0===r||null===(t=r[a])||void 0===t?void 0:t.length)>1,m=(0,Tt.bw)(a),f=p&&m&&!(0,g.isUndefined)(d),y=p&&!m&&!(0,g.isUndefined)(c);return(0,E.FD)("div",{children:[y&&(0,E.FD)("div",{css:Et.valueField,children:[(0,E.FD)("strong",{children:[(0,E.Y)(v.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",c]}),f&&(0,E.FD)("div",{css:Et.valueField,children:[(0,E.FD)("strong",{children:[(0,E.Y)(v.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",h.A.formatTimestamp(d)]}),u&&(0,E.FD)("div",{css:Et.valueField,children:[(0,E.FD)("strong",{children:[a,":"]})," ",u]})]})},Et={valueField:{maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var Pt=s(31231),zt=s(13135),Bt=s(65412),Vt=s(91144),Kt=s(7842);const Ot=e=>{let{runInfo:t,metricKey:s,metricsHistory:r,onUpdate:i,xRange:n,yRange:o}=e;const{theme:l}=(0,a.u)(),c=(0,Vt.dD)(),{setTooltip:u,resetTooltip:h}=(0,Ut.uN)({metricKey:s},c?Ut.QS.MultipleTracesWithScanline:Ut.QS.Simple),p=(0,d.useMemo)((()=>[{uuid:t.runUuid,displayName:t.runName,runInfo:t,metricsHistory:{[s]:r},color:l.colors.primary}]),[t,r,s,l]);return(0,E.Y)(Bt.h,{metricKey:s,runsData:p,xAxisKey:(0,Tt.bw)(s)?Kt.fj.TIME:Kt.fj.STEP,selectedXAxisMetricKey:"",onHover:u,onUnhover:h,useDefaultHoverBox:!1,lineSmoothness:0,xRange:n,yRange:o,onUpdate:i})};var jt=s(65243);const Wt=e=>{let{runInfo:t,metricKey:s,metricEntry:r}=e;const{theme:i}=(0,a.u)(),{setTooltip:n,resetTooltip:o}=(0,Ut.uN)({metricKey:s}),l=(0,d.useMemo)((()=>r?[{uuid:t.runUuid,displayName:t.runName,runInfo:t,metrics:{[s]:r},color:i.colors.primary}]:[]),[t,r,s,i]);return(0,E.Y)(jt.u,{metricKey:s,runsData:l,height:260,onHover:n,onUnhover:o,useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1})};var qt=s(52350),Gt=s(25121),Jt=s(90765);var Xt={name:"1fgcczm",styles:"cursor:grab"},Qt={name:"82a6rk",styles:"flex:1"},$t={name:"ozd7xs",styles:"flex-shrink:0"};const Zt=e=>{let{dragHandleRef:t,metricKey:s,canMoveUp:n,canMoveDown:o,onMoveUp:l,onMoveDown:d,onRefresh:c,isRefreshing:u=!1}=e;const{theme:h}=(0,a.u)();return(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:h.spacing.sm,justifyContent:"space-between",marginBottom:h.spacing.sm,alignItems:"center"},""),children:[(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:h.spacing.sm,alignItems:"center",overflow:"hidden"},""),children:[(0,E.Y)(i.WP0,{css:Xt,ref:t}),(0,E.Y)(a.T.Title,{level:4,ellipsis:!0,withoutMargins:!0,children:s})]}),(0,E.Y)("div",{css:Qt}),u&&(0,E.Y)(a.S,{label:(0,E.Y)(v.A,{id:"zMmWhy",defaultMessage:"Chart data is refreshing"})}),(0,E.FD)(i.rId.Root,{modal:!1,children:[(0,E.Y)(i.rId.Trigger,{asChild:!0,children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartheader.tsx_78",css:$t,icon:(0,E.Y)(i.ssM,{}),size:"small",title:"Chart options"})}),(0,E.FD)(i.rId.Content,{children:[(0,E.Y)(i.rId.Item,{disabled:!n,onClick:l,children:(0,E.Y)(v.A,{id:"Eh/e0j",defaultMessage:"Move up"})}),(0,E.Y)(i.rId.Item,{disabled:!o,onClick:d,children:(0,E.Y)(v.A,{id:"Sp+Iw0",defaultMessage:"Move down"})})]})]})]})};var es=s(92206);var ts={name:"1g7ixto",styles:"height:100%;display:flex;align-items:center;justify-content:center"},ss={name:"fhw977",styles:"height:300px"};const rs=e=>{var t;let{metricKey:s,runInfo:o,dragGroupKey:l,onReorderWith:c,canMoveUp:u,canMoveDown:h,onMoveUp:p,onMoveDown:m,chartRefreshManager:f}=e;const{dragHandleRef:y,dragPreviewRef:Y,dropTargetRef:x,isDragging:M,isOver:w}=(0,Jt.S)({dragGroupKey:l,dragKey:s,onDrop:c}),A=(0,d.useMemo)((()=>[o.runUuid]),[o]),b=(0,d.useMemo)((()=>[s]),[s]),[C,S]=(0,d.useState)(void 0),{theme:R}=(0,a.u)(),[I,k]=(0,d.useState)(void 0),D=(0,n.d4)((e=>{var t;return null===(t=e.entities.sampledMetricsByRunUuid[o.runUuid])||void 0===t?void 0:t[s]})),{elementRef:N,isInViewport:T}=(0,es.v)(),{isLoading:F,isRefreshing:_,resultsByRunUuid:U,refresh:L}=(0,zt.S)({runUuids:A,metricKeys:b,enabled:T,range:I,maxResults:320}),{metricsHistory:H,error:P}=(null===(t=U[o.runUuid])||void 0===t?void 0:t[s])||{},z=!F&&1===(null===H||void 0===H?void 0:H.length),B=e=>k((t=>(0,g.isEqual)(t,e)?t:e)),{destroyTooltip:V}=(0,Ut.uN)({metricKey:s});(0,d.useEffect)((()=>{F&&V()}),[V,F]),(0,d.useEffect)((()=>T?f.registerRefreshCallback((()=>{L()})):()=>{}),[f,L,T]);const K=(0,d.useRef)(void 0),O=e=>{var t,r,i,a;let{layout:n}=e;!0===(null===(t=n.xaxis)||void 0===t?void 0:t.autorange)&&(S(void 0),B(void 0));const o=null===(r=n.yaxis)||void 0===r?void 0:r.range;if(K.current=o?[...o]:void 0,!1===(null===(i=n.xaxis)||void 0===i?void 0:i.autorange)&&null!==(a=n.xaxis)&&void 0!==a&&a.range)if(S([...n.xaxis.range]),(0,Tt.bw)(s))B((0,Gt._)(D,n.xaxis.range));else{var l,d;const e=Math.floor(null===(l=n.xaxis)||void 0===l?void 0:l.range[0]),t=Math.ceil(null===(d=n.xaxis)||void 0===d?void 0:d.range[1]);B(e&&t?[e-1,t+1]:void 0)}},{resetTooltip:j}=(0,Ut.uN)({metricKey:s});return(0,E.FD)("div",{role:"figure",ref:e=>{null===Y||void 0===Y||Y(e),null===x||void 0===x||x(e)},css:(0,r.AH)({border:`1px solid ${R.colors.borderDecorative}`,borderRadius:R.general.borderRadiusBase,padding:R.spacing.md,background:R.colors.backgroundPrimary,position:"relative",overflow:"hidden"},""),children:[(0,E.FD)("div",{ref:N,onMouseLeave:j,children:[(0,E.Y)(Zt,{canMoveDown:h,canMoveUp:u,dragHandleRef:y,metricKey:s,onMoveDown:m,onMoveUp:p,onRefresh:L,isRefreshing:_}),(0,E.Y)("div",{css:ss,children:(()=>{var e;return P?(0,E.Y)("div",{css:ts,children:(0,E.Y)(i.SvL,{image:(0,E.Y)(Pt.W,{}),description:P instanceof qt.s?P.getMessageField():null===P||void 0===P||null===(e=P.message)||void 0===e?void 0:e.toString(),title:(0,E.Y)(v.A,{id:"U7eJfk",defaultMessage:"Error while fetching chart data"})})}):F||!H?(0,E.Y)(i.PLz,{}):T?z?(0,E.Y)(Wt,{metricKey:s,metricEntry:(0,g.first)(H),runInfo:o}):(0,E.Y)(Ot,{metricKey:s,metricsHistory:H,runInfo:o,onUpdate:O,xRange:C,yRange:K.current}):null})()})]}),M&&(0,E.Y)("div",{css:(0,r.AH)({position:"absolute",inset:0,backgroundColor:R.isDarkMode?R.colors.blue800:R.colors.blue100},"")}),w&&(0,E.Y)("div",{css:(0,r.AH)({position:"absolute",inset:0,backgroundColor:R.isDarkMode?R.colors.blue800:R.colors.blue100,border:`2px dashed ${R.colors.blue400}`,opacity:.75},"")})]})};class is{constructor(){this.refreshCallbacks=[]}registerRefreshCallback(e){return this.refreshCallbacks.push(e),()=>{this.refreshCallbacks=this.refreshCallbacks.filter((t=>t!==e))}}refreshAllCharts(){this.refreshCallbacks.forEach((e=>e()))}}const{systemMetricChartsEmpty:as,modelMetricChartsEmpty:ns}=(0,Dt.YK)({systemMetricChartsEmpty:{id:"dQY7H0",defaultMessage:"No system metrics recorded"},modelMetricChartsEmpty:{id:"31EKoz",defaultMessage:"No model metrics recorded"}}),os=()=>(0,E.Y)(i.SvL,{title:"No matching metric keys",description:"All metrics in this section are filtered. Clear the search filter to see hidden metrics."}),ls=e=>{let{label:t}=e;return(0,E.Y)(i.SvL,{title:t,description:null})},ds=(e,t)=>t.toLowerCase().startsWith(e.toLowerCase())||(0,Tt.RZ)(t).toLowerCase().startsWith(e.toLowerCase()),cs=e=>{let{metricKeys:t,search:s,runInfo:r,chartRefreshManager:i,onReorderChart:n}=e;const{theme:o}=(0,a.u)(),l=t.filter((e=>ds(s,e))),{canMoveDown:c,canMoveUp:u,moveChartDown:h,moveChartUp:p}=((e,t)=>({canMoveDown:t=>t!==(0,g.last)(e),canMoveUp:t=>t!==(0,g.first)(e),moveChartDown:s=>{const r=e[(0,g.indexOf)(e,s)+1];t(s,r)},moveChartUp:s=>{const r=e[(0,g.indexOf)(e,s)-1];t(s,r)}}))(l,n),m=(0,d.useMemo)((()=>({...(0,Nt.A)({maxColumns:3,gap:o.spacing.lg,additionalBreakpoints:[{breakpointWidth:2160,minColumnWidthForBreakpoint:720}]}),overflow:"hidden"})),[o]);return l.length?(0,E.Y)("div",{css:m,children:l.map(((e,t)=>(0,E.Y)(rs,{dragGroupKey:"metricCharts",metricKey:e,runInfo:r,onReorderWith:n,canMoveUp:u(e),canMoveDown:c(e),onMoveDown:()=>h(e),onMoveUp:()=>p(e),chartRefreshManager:i},`${e}-${t}`)))}):(0,E.Y)(os,{})};var us={name:"1t91kdm",styles:"flex:1;display:flex;flex-direction:column"},hs={name:"ozd7xs",styles:"flex-shrink:0"},ps={name:"1tc6xju",styles:"flex:1;overflow:auto"};const ms=e=>{let{runInfo:t,metricKeys:s,mode:o}=e;const l=(()=>{const[e]=(0,d.useState)((()=>new is));return e})(),c=(0,n.d4)((e=>{let{entities:s}=e;return(0,g.mapValues)(s.sampledMetricsByRunUuid[t.runUuid],(e=>(0,g.compact)((0,g.values)(e).map((e=>{let{metricsHistory:t}=e;return t})).flat())))})),[u,h]=(0,d.useState)(""),{formatMessage:p}=(0,Ae.A)(),{orderedMetricKeys:m,onReorderChart:f}=((e,t,s)=>{const r=(0,d.useRef)(Ft.A.getStoreForComponent(t,s)),[i,a]=(0,d.useState)((()=>{try{const e=r.current.getItem(_t);if(e)return JSON.parse(e)}catch{return}}));return{orderedMetricKeys:(0,d.useMemo)((()=>(0,g.orderBy)(e,(e=>null!==i&&void 0!==i&&i.includes(e)?(0,g.indexOf)(i,e):Number.MAX_SAFE_INTEGER))),[i,e]),onReorderChart:(t,s)=>{const n=i?[...i]:[...e],o=(0,g.indexOf)(n,t),l=(0,g.indexOf)(n,s);[n[o],n[l]]=[n[l],n[o]],a(n),r.current.setItem(_t,JSON.stringify(n))}}})(s,"RunView"+o,t.runUuid),y=!s.length,Y=!y&&!s.some((e=>ds(u,e))),x=!y,{theme:M}=(0,a.u)(),w=!y&&!Y,A=(0,d.useMemo)((()=>({runInfo:t,metricsForRun:c})),[t,c]),b=(0,n.d4)((e=>(0,g.values)(e.entities.sampledMetricsByRunUuid[t.runUuid]).some((e=>(0,g.values)(e).some((e=>{let{refreshing:t}=e;return t}))))));return(0,E.Y)(Jt.G,{children:(0,E.FD)("div",{css:us,children:[(0,E.FD)("div",{css:hs,children:[x&&(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,E.Y)(i.pde,{role:"searchbox",prefix:(0,E.Y)(i.WIv,{}),value:u,allowClear:!0,onChange:e=>h(e.target.value),placeholder:p({id:"Xs1oJm",defaultMessage:"Search metric charts"})}),(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetriccharts.tsx_176",icon:b?(0,E.Y)(a.S,{size:"small",css:(0,r.AH)({marginRight:M.spacing.sm},"")}):(0,E.Y)(i.fNY,{}),onClick:()=>{b||l.refreshAllCharts()},children:(0,E.Y)(v.A,{id:"gDNspC",defaultMessage:"Refresh"})})]}),(0,E.Y)(F.S,{})]}),y&&(0,E.Y)(ls,{label:(0,E.Y)(v.A,{..."model"===o?ns:as})}),Y&&(0,E.Y)(os,{}),(0,E.Y)("div",{css:ps,children:(0,E.Y)(Ut.W,{contextData:A,component:Ht,hoverOnly:!0,children:w&&(0,E.Y)(cs,{metricKeys:m,runInfo:t,search:u,onReorderChart:f,chartRefreshManager:l})})})," "]})})};var gs=s(21616),fs=s(76758);const vs=e=>{let{status:t}=e;const{theme:s}=(0,a.u)();return(0,E.FD)(i.vwO,{css:(0,r.AH)({backgroundColor:"FINISHED"===t?s.isDarkMode?s.colors.green800:s.colors.green100:"KILLED"===t||"FAILED"===t?s.isDarkMode?s.colors.red800:s.colors.red100:"SCHEDULED"===t||"RUNNING"===t?s.isDarkMode?s.colors.blue800:s.colors.blue100:void 0},""),children:[(0,E.Y)(fs.F,{status:t})," ",(0,E.Y)(a.T.Text,{css:(0,r.AH)({marginLeft:s.spacing.sm},""),children:"FINISHED"===t?(0,E.Y)(a.T.Text,{color:"success",children:(0,E.Y)(v.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===t?(0,E.Y)(a.T.Text,{color:"error",children:(0,E.Y)(v.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===t?(0,E.Y)(a.T.Text,{color:"error",children:(0,E.Y)(v.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===t?(0,E.Y)(a.T.Text,{color:"info",children:(0,E.Y)(v.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===t?(0,E.Y)(a.T.Text,{color:"info",children:(0,E.Y)(v.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):t})]})},ys=e=>{let{runInfo:t,tags:s}=e;const r=h.A.getUser(t,s);return(0,E.Y)(u.N_,{to:Yt.h.searchRunsByUser(t.experimentId,r),children:r})};var Ys={name:"ozd7xs",styles:"flex-shrink:0"};const xs=e=>{let{name:t,value:s,toggleExpanded:n,isExpanded:o,autoExpandedRowsList:l}=e;const{theme:c}=(0,a.u)(),u=(0,d.useRef)(null),[h,p]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{l[t]||h&&(n(),l[t]=!0)}),[l,h,t,n]),(0,d.useEffect)((()=>{if(!u.current)return;const e=(0,g.throttle)((e=>{let[t]=e;const s=t.target.scrollHeight>t.target.clientHeight;p(s)}),500,{trailing:!0}),t=new ResizeObserver(e);return t.observe(u.current),()=>t.disconnect()}),[u,n]),(0,d.useEffect)((()=>{if(u.current&&!o){u.current.scrollHeight>u.current.clientHeight&&p(!0)}}),[o]),(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:c.spacing.xs},""),children:[(h||o)&&(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_74",size:"small",icon:o?(0,E.Y)(i.D3D,{}):(0,E.Y)(i.vKP,{}),onClick:()=>n(),css:Ys}),(0,E.Y)("div",{title:s,css:(0,r.AH)({overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o?void 0:"3"},""),ref:u,children:o?(0,E.Y)(Ms,{value:s}):s})]})},Ms=e=>{let{value:t}=e;const s=(0,d.useMemo)((()=>{try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return null}}),[t]);return(0,E.Y)("div",{css:(0,r.AH)({whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:s?"monospace":void 0},""),children:s||t})};var ws={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"},As={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};const bs=e=>{let{params:t,runUuid:s}=e;const{theme:n}=(0,a.u)(),o=(0,Ae.A)(),[l,c]=(0,d.useState)(""),u=(0,d.useRef)({}),h=(0,d.useMemo)((()=>(0,g.values)(t)),[t]),p=(0,d.useMemo)((()=>h.filter((e=>{let{key:t,value:s}=e;const r=l.toLowerCase();return t.toLowerCase().includes(r)||s.toLowerCase().includes(r)}))),[l,h]),m=(0,d.useMemo)((()=>[{id:"key",accessorKey:"key",header:()=>(0,E.Y)(v.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,E.Y)(v.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:e=>{let{row:{original:t,getIsExpanded:s,toggleExpanded:r}}=e;return(0,E.Y)(xs,{name:t.key,value:t.value,isExpanded:s(),toggleExpanded:r,autoExpandedRowsList:u.current})}}]),[]),f=(0,be.N4)({data:p,getCoreRowModel:(0,Ce.HT)(),getExpandedRowModel:(0,Ce.D0)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:m});return(0,E.FD)("div",{css:As,children:[(0,E.Y)(a.T.Title,{level:4,children:(0,E.Y)(v.A,{id:"Q/evEc",defaultMessage:"Parameters ({length})",values:{length:p.length}})}),(0,E.Y)("div",{css:(0,r.AH)({padding:n.spacing.sm,border:`1px solid ${n.colors.borderDecorative}`,borderRadius:n.general.borderRadiusBase,flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},""),children:(()=>{if(!h.length)return(0,E.Y)("div",{css:ws,children:(0,E.Y)(i.SvL,{description:(0,E.Y)(v.A,{id:"6UqPlE",defaultMessage:"No parameters recorded"})})});const e=p.length<1;return(0,E.FD)(E.FK,{children:[(0,E.Y)("div",{css:(0,r.AH)({marginBottom:n.spacing.sm},""),children:(0,E.Y)(i.pde,{prefix:(0,E.Y)(i.WIv,{}),placeholder:o.formatMessage({id:"SLHSXV",defaultMessage:"Search parameters"}),value:l,onChange:e=>c(e.target.value),allowClear:!0})}),(0,E.FD)(i.XIK,{scrollable:!0,empty:e?(0,E.Y)("div",{css:(0,r.AH)({marginTop:4*n.spacing.md},""),children:(0,E.Y)(i.SvL,{description:(0,E.Y)(v.A,{id:"QD6iZA",defaultMessage:"No parameters match the search filter"})})}):null,children:[(0,E.Y)(i.Hjg,{isHeader:!0,children:f.getLeafHeaders().map(((e,t)=>(0,E.Y)(i.A0N,{resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),css:(0,r.AH)({flexGrow:e.column.getCanResize()?0:1},""),style:{flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,be.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),f.getRowModel().rows.map((e=>(0,E.Y)(i.Hjg,{children:e.getAllCells().map((e=>{var t;return(0,E.Y)(i.nA6,{css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},multiline:!0,children:(0,be.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)))]})]})})()})]})};const{systemMetricsLabel:Cs,modelMetricsLabel:Ss}=(0,Dt.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),Rs=e=>t=>{let{key:s}=t;return s.toLowerCase().includes(e.toLowerCase())};var Is={name:"1ff36h2",styles:"flex-grow:1"};const ks=e=>{let{metricsList:t,runInfo:s,header:n,table:o}=e;const{theme:l}=(0,a.u)(),[{column:d}]=o.getLeafHeaders();return t.length?(0,E.FD)(E.FK,{children:[n&&(0,E.Y)(i.Hjg,{children:(0,E.Y)(i.nA6,{css:(0,r.AH)({flex:1,backgroundColor:l.colors.backgroundSecondary},""),children:(0,E.FD)(a.T.Text,{bold:!0,children:[n," (",t.length,")"]})})}),t.map((e=>{let{key:t,value:r}=e;return(0,E.FD)(i.Hjg,{children:[(0,E.Y)(i.nA6,{style:{flexGrow:0,flexBasis:d.getSize()},children:(0,E.Y)(u.N_,{to:Yt.h.getMetricPageRoute([s.runUuid],t,[s.experimentId]),children:t})}),(0,E.Y)(i.nA6,{css:Is,children:r.toString()})]},t)}))]}):null};var Ds={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"},Ns={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Ts={name:"ozd7xs",styles:"flex-shrink:0"};const Fs=e=>{let{latestMetrics:t,runInfo:s}=e;const{theme:n}=(0,a.u)(),o=(0,Ae.A)(),[l,c]=(0,d.useState)(""),u=(0,d.useMemo)((()=>(0,g.values)(t)),[t]),h=(0,d.useMemo)((()=>[{id:"key",accessorKey:"key",header:()=>(0,E.Y)(v.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,E.Y)(v.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1}]),[]),p=(0,d.useMemo)((()=>{const e=u.filter((e=>{let{key:t}=e;return(0,Tt.bw)(t)})),t=u.filter((e=>{let{key:t}=e;return!(0,Tt.bw)(t)}));return e.length>0&&t.length>0?[{header:o.formatMessage(Cs),metrics:e.filter(Rs(l))},{header:o.formatMessage(Ss),metrics:t.filter(Rs(l))}]:[{header:void 0,metrics:u.filter(Rs(l))}]}),[l,u,o]),m=(0,be.N4)({data:u,getCoreRowModel:(0,Ce.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:h});return(0,E.FD)("div",{css:Ns,children:[(0,E.Y)(a.T.Title,{level:4,css:Ts,children:(0,E.Y)(v.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:u.filter(Rs(l)).length}})}),(0,E.Y)("div",{css:(0,r.AH)({padding:n.spacing.sm,border:`1px solid ${n.colors.borderDecorative}`,borderRadius:n.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!u.length)return(0,E.Y)("div",{css:Ds,children:(0,E.Y)(i.SvL,{description:(0,E.Y)(v.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,g.sum)(p.map((e=>{let{metrics:t}=e;return t.length})))<1;return(0,E.FD)(E.FK,{children:[(0,E.Y)("div",{css:(0,r.AH)({marginBottom:n.spacing.sm},""),children:(0,E.Y)(i.pde,{prefix:(0,E.Y)(i.WIv,{}),placeholder:o.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:l,onChange:e=>c(e.target.value),allowClear:!0})}),(0,E.FD)(i.XIK,{scrollable:!0,empty:e?(0,E.Y)("div",{css:(0,r.AH)({marginTop:4*n.spacing.md},""),children:(0,E.Y)(i.SvL,{description:(0,E.Y)(v.A,{id:"iTjTQt",defaultMessage:"No metrics match the search filter"})})}):null,children:[(0,E.Y)(i.Hjg,{isHeader:!0,children:m.getLeafHeaders().map((e=>(0,E.Y)(i.A0N,{resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),isResizing:e.column.getIsResizing(),style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,be.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),p.map(((e,t)=>(0,E.Y)(ks,{metricsList:e.metrics,runInfo:s,header:e.header,table:m},e.header||t)))]})]})})()})]})};var _s=s(38243),Us=s(85343);var Ls={name:"1flj9lk",styles:"text-align:left"},Hs={name:"ti75j2",styles:"margin:0"};const Es=e=>{let{dataset:t,onClick:s}=e;return(0,E.Y)(a.T.Link,{role:"link",css:Ls,onClick:s,children:(0,E.Y)(_s.E,{datasetWithTags:t,displayTextAsLink:!0,css:Hs})})},Ps=e=>{let{tags:t,runInfo:s,datasets:n}=e;const[o,l]=(0,d.useState)(null),{theme:c}=(0,a.u)(),[u,h]=(0,d.useState)(!1);if(!n||!n.length)return null;const p=n[0],m=n.slice(1),g=e=>{l({datasetWithTags:e,runData:{experimentId:s.experimentId,runUuid:s.runUuid,runName:s.runName,datasets:n,tags:t}}),h(!0)};return(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:c.spacing.sm,alignItems:"center"},""),children:[(0,E.Y)(Es,{dataset:p,onClick:()=>g(p)}),m.length?(0,E.FD)(i.rId.Root,{modal:!1,children:[(0,E.Y)(i.rId.Trigger,{asChild:!0,children:(0,E.FD)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70",size:"small",children:["+",m.length]})}),(0,E.Y)(i.rId.Content,{children:m.map((e=>(0,E.Y)(i.rId.Item,{children:(0,E.Y)(Es,{dataset:e,onClick:()=>g(e)})},e.dataset.digest)))})]}):null,o&&(0,E.Y)(Us.O,{isOpen:u,setIsOpen:h,selectedDatasetWithRun:o,setSelectedDatasetWithRun:l})]})},zs=e=>{let{parentRunUuid:t}=e;const s=(0,n.d4)((e=>{let{entities:s}=e;return s.runInfosByUuid[t]})),r=(0,n.wA)();return(0,d.useEffect)((()=>{s||r((0,Xe.aO)(t))}),[r,t,s]),s?(0,E.Y)(u.N_,{to:Yt.h.getRunPageRoute(s.experimentId,s.runUuid),children:s.runName}):(0,E.Y)(i.I_K,{loading:!0,label:(0,E.Y)(v.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var Bs=s(43683),Vs=s(20978);const Ks=e=>!e.startsWith(K.nt),Os=e=>{let{runUuid:t,tags:s,onTagsUpdated:o}=e;const{theme:l}=(0,a.u)(),c=(0,n.wA)(),u=(0,Ae.A)(),[h,p]=(0,d.useMemo)((()=>[(0,g.keys)(s).filter(Ks),(0,g.values)(s).filter((e=>{let{key:t}=e;return Ks(t)}))]),[s]),{EditTagsModal:m,showEditTagsModal:f,isLoading:y}=(0,Bs.Q)({valueRequired:!0,allAvailableTags:h,saveTagsHandler:async(e,s,r)=>c((0,Xe.hD)(t,s,r)).then(o)}),Y=()=>{f({tags:p})},x=u.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,E.FD)("div",{css:(0,r.AH)({paddingTop:l.spacing.xs,paddingBottom:l.spacing.xs,display:"flex",flexWrap:"wrap","> *":{marginRight:"0 !important"},gap:l.spacing.xs},""),children:[p.length<1?(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewtagsbox.tsx_67",size:"small",type:"link",onClick:Y,children:(0,E.Y)(v.A,{id:"0IQod2",defaultMessage:"Add"})}):(0,E.FD)(E.FK,{children:[p.map((e=>(0,E.Y)(Vs.tj,{tag:e,enableFullViewModal:!0},`${e.key}-${e.value}`))),(0,E.Y)(i.m_M,{title:x,children:(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewtagsbox.tsx_76","aria-label":x,size:"small",icon:(0,E.Y)(i.R2l,{}),onClick:Y})})]}),y&&(0,E.Y)(a.S,{size:"small"}),m]})};var js=s(85392),Ws=s(56928);const qs=e=>{var t;let{runUuid:s,tags:o,onDescriptionChanged:l}=e;const c=(null===(t=o[Ws.e])||void 0===t?void 0:t.value)||"",[u,h]=(0,d.useState)(!1),p=(0,Ae.A)(),{theme:m}=(0,a.u)(),g=(0,n.wA)(),f=!c;return(0,E.FD)("div",{css:(0,r.AH)({marginBottom:m.spacing.md},""),children:[(0,E.FD)(a.T.Title,{level:4,css:(0,r.AH)({display:"flex",alignItems:"center",gap:m.spacing.xs},""),children:[(0,E.Y)(v.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,E.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":p.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>h(!0),icon:(0,E.Y)(i.R2l,{})})]}),f&&!u&&(0,E.Y)(a.T.Hint,{children:(0,E.Y)(v.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!f||u)&&(0,E.Y)(js.V,{defaultMarkdown:c,onSubmit:e=>g((0,Xe.Jv)(s,Ws.e,e)).then(l).then((()=>h(!1))),onCancel:()=>h(!1),showEditor:u})]})},Gs=e=>{let{title:t,value:s}=e;const{theme:i}=(0,a.u)();return(0,E.FD)("tr",{css:(0,r.AH)({display:"flex",borderBottom:`1px solid ${i.colors.borderDecorative}`,minHeight:i.general.heightSm},""),children:[(0,E.Y)("th",{css:(0,r.AH)({flex:"0 0 240px",backgroundColor:i.colors.backgroundSecondary,color:i.colors.textSecondary,padding:i.spacing.sm,display:"flex",alignItems:"flex-start"},""),children:t}),(0,E.Y)("td",{css:(0,r.AH)({flex:1,padding:i.spacing.sm,paddingTop:0,paddingBottom:0,display:"flex",alignItems:"center"},""),children:s})]})};const Js=e=>{const{name:t,version:s}=e;return we.fM.getModelVersionPageRoute(t,s)};var Xs={name:"e0dnmk",styles:"cursor:pointer"};const Qs=e=>{let{registeredModels:t,runInfo:s}=e;const{theme:n}=(0,a.u)();return(0,E.Y)(i.nEg,{children:t.map((e=>(0,E.FD)(u.N_,{to:Js(e),css:(0,r.AH)({display:"flex",alignItems:"center",gap:n.spacing.sm},""),children:[(0,E.Y)(wt.h,{})," ",e.name," ",(0,E.FD)(i.vwO,{css:Xs,children:["v",e.version]})]},e.name)))})},$s=e=>{let{loggedModels:t,runInfo:s}=e;const{theme:n}=(0,a.u)(),{experimentId:o,runUuid:l}=s,c=e=>(0,g.first)(e)||(0,E.Y)(v.A,{id:"0HbGko",defaultMessage:"Model"}),h=(0,d.useMemo)((()=>{const e=t.map((e=>c(e.flavors)));return new Set(e).size!==e.length}),[t]);return(0,E.Y)(i.nEg,{children:t.map(((e,t)=>(0,E.FD)(u.N_,{to:Yt.h.getRunPageRoute(o,l,e.artifactPath),css:(0,r.AH)({display:"flex",alignItems:"center",gap:n.spacing.sm,cursor:"pointer",height:h&&t>0?n.general.heightBase:n.general.heightSm},""),children:[(0,E.Y)(i.oiI,{}),(0,E.FD)("div",{children:[c(e.flavors),h&&t>0&&(0,E.Y)(a.T.Hint,{children:e.artifactPath})]})]},e.artifactPath)))})};var Zs=s(1323);var er={name:"1wcfv52",styles:"margin-right:0"},tr={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},sr={name:"9gxvqt",styles:"display:flex;gap:4px;align-items:center"},rr={name:"ou8xsw",styles:"flex:0 0 auto"},ir={name:"1wcfv52",styles:"margin-right:0"},ar={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"};const nr=e=>{var t,s,n;let{runUuid:o,tags:l,search:d}=e;const c=null===l||void 0===l||null===(t=l[p.xd])||void 0===t?void 0:t.value,u=null===l||void 0===l||null===(s=l[h.A.gitCommitTag])||void 0===s?void 0:s.value,m=h.A.renderSource(l,d,o,c),{theme:g}=(0,a.u)();return m?(0,E.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:g.spacing.sm,paddingTop:g.spacing.sm,paddingBottom:g.spacing.sm,flexWrap:"wrap"},""),children:[(0,E.Y)(Zs.m,{sourceType:null===(n=l[h.A.sourceTypeTag])||void 0===n?void 0:n.value,css:(0,r.AH)({color:g.colors.actionPrimaryBackgroundDefault},"")}),m," ",c&&(0,E.Y)(i.m_M,{title:c,children:(0,E.Y)(i.vwO,{css:er,children:(0,E.FD)("div",{css:tr,children:[(0,E.Y)(i.OKA,{})," ",c]})})}),u&&(0,E.Y)(i.m_M,{dangerouslySetAntdProps:{overlayStyle:{maxWidth:"none"}},title:(0,E.FD)("div",{css:sr,children:[u,(0,E.Y)(tt.i,{css:rr,showLabel:!1,size:"small",type:"tertiary",copyText:u,icon:(0,E.Y)(i.TdU,{})})]}),children:(0,E.Y)(i.vwO,{css:ir,children:(0,E.FD)("div",{css:ar,children:[(0,E.Y)(i.fSU,{})," ",u.slice(0,7)]})})})]}):(0,E.Y)(a.T.Hint,{children:"\u2014"})};var or={name:"4zleql",styles:"display:block"};const lr=e=>{let{children:t}=e;const{theme:s}=(0,a.u)();return(0,E.Y)("table",{css:(0,r.AH)({display:"block",border:`1px solid ${s.colors.borderDecorative}`,borderBottom:"none",borderRadius:s.general.borderRadiusBase,width:"50%",minWidth:640,marginBottom:s.spacing.lg,overflow:"hidden"},""),children:(0,E.Y)("tbody",{css:or,children:t})})},dr=e=>{let{value:t}=e;const{theme:s}=(0,a.u)();return(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:s.spacing.xs,alignItems:"center"},""),children:[t,(0,E.Y)(tt.i,{showLabel:!1,copyText:t,icon:(0,E.Y)(i.TdU,{}),size:"small"})]})};const cr=()=>(0,E.Y)(a.T.Hint,{children:"\u2014"});var ur={name:"82a6rk",styles:"flex:1"};const hr=e=>{let{runUuid:t,onRunDataUpdated:s}=e;const{theme:i}=(0,a.u)(),{search:o}=(0,u.zy)(),{tags:l,runInfo:c,datasets:p,params:m,registeredModels:g,latestMetrics:f}=(0,n.d4)((e=>{let{entities:s}=e;return{tags:s.tagsByRunUuid[t],runInfo:s.runInfosByUuid[t],datasets:s.runDatasetsByUuid[t],params:s.paramsByRunUuid[t],latestMetrics:s.latestMetricsByRunUuid[t],registeredModels:s.modelVersionsByRunUuid[t]}})),y=(0,d.useMemo)((()=>h.A.getLoggedModelsFromTags(l)),[l]),Y=l[gs.Ol];return(0,E.FD)("div",{css:ur,children:[(0,E.Y)(qs,{runUuid:t,tags:l,onDescriptionChanged:s}),(0,E.Y)(a.T.Title,{level:4,children:(0,E.Y)(v.A,{id:"Isaf66",defaultMessage:"Details"})}),(0,E.FD)(lr,{children:[(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"PP5HZf",defaultMessage:"Created at"}),value:c.startTime?h.A.formatTimestamp(c.startTime):(0,E.Y)(cr,{})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"7KKvmS",defaultMessage:"Created by"}),value:(0,E.Y)(ys,{runInfo:c,tags:l})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,E.Y)(dr,{value:c.experimentId})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"vxY1CI",defaultMessage:"Status"}),value:(0,E.Y)(vs,{status:c.status})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,E.Y)(dr,{value:c.runUuid})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"ZoIjun",defaultMessage:"Duration"}),value:h.A.getDuration(c.startTime,c.endTime)}),Y&&(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,E.Y)(zs,{parentRunUuid:Y.value})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"fwp4JP",defaultMessage:"Datasets used"}),value:null!==p&&void 0!==p&&p.length?(0,E.Y)(Ps,{tags:l,runInfo:c,datasets:p}):(0,E.Y)(cr,{})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"rs7Iic",defaultMessage:"Tags"}),value:(0,E.Y)(Os,{runUuid:c.runUuid,tags:l,onTagsUpdated:s})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"WmDiY9",defaultMessage:"Source"}),value:(0,E.Y)(nr,{tags:l,search:o,runUuid:t})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"mjNFJt",defaultMessage:"Logged models"}),value:(null===y||void 0===y?void 0:y.length)>0?(0,E.Y)($s,{runInfo:c,loggedModels:y}):(0,E.Y)(cr,{})}),(0,E.Y)(Gs,{title:(0,E.Y)(v.A,{id:"BCpX6U",defaultMessage:"Registered models"}),value:(null===g||void 0===g?void 0:g.length)>0?(0,E.Y)(Qs,{runInfo:c,registeredModels:g}):(0,E.Y)(cr,{})})]}),(0,E.FD)("div",{css:(0,r.AH)({display:"flex",gap:i.spacing.lg,minHeight:360,maxHeight:760,overflow:"hidden"},""),children:[(0,E.Y)(bs,{params:m,runUuid:t}),(0,E.Y)(Fs,{latestMetrics:f,runInfo:c})]})]})};var pr=s(82214);class mr extends d.Component{render(){return(0,E.Y)(pr.E,{statusCode:404,subMessage:`Run ID ${this.props.runId} does not exist`,fallbackHomePageReactRoute:Yt.h.rootRoute})}}var gr=s(64558),fr=s(33946),vr=s(30152),yr=s(83128),Yr=s(19485),xr=s(62758),Mr=s(63617),wr=s(4972),Ar=s(55999);var br={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Cr={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Sr=e=>{let{runInfo:t,metricKeys:s,mode:o,chartUIState:l,updateChartsUIState:c}=e;const{theme:u}=(0,a.u)(),[h,m]=(0,d.useState)(""),{formatMessage:f}=(0,Ae.A)(),{compareRunCharts:v,compareRunSections:y}=l,[Y,x]=(0,d.useState)(void 0),M=(0,n.d4)((e=>{let{entities:s}=e;return(0,g.mapValues)(s.sampledMetricsByRunUuid[t.runUuid],(e=>(0,g.compact)((0,g.values)(e).map((e=>{let{metricsHistory:t}=e;return t})).flat())))})),w=(0,d.useMemo)((()=>({runInfo:t,metricsForRun:M})),[t,M]),{paramsByRunUuid:A,latestMetricsByRunUuid:b,tagsByRunUuid:C,imagesByRunUuid:S}=(0,n.d4)((e=>({paramsByRunUuid:e.entities.paramsByRunUuid,latestMetricsByRunUuid:e.entities.latestMetricsByRunUuid,tagsByRunUuid:e.entities.tagsByRunUuid,imagesByRunUuid:e.entities.imagesByRunUuid}))),[R,I]=(0,d.useState)(null),k=(0,xr.iO)(),D=(0,xr.cA)(),N=(0,xr.KP)(),T=(0,xr.Ez)(),F=(0,d.useMemo)((()=>[{displayName:t.runName,metrics:b[t.runUuid]||{},params:A[t.runUuid]||{},tags:C[t.runUuid]||{},images:S[t.runUuid]||{},metricHistory:{},uuid:t.runUuid,color:u.colors.primary,runInfo:t}]),[t,b,A,C,S,u]);(0,d.useEffect)((()=>{if((!y||!v)&&F.length>0){const{resultChartSet:e,resultSectionSet:t}=vr.i$.getBaseChartAndSectionConfigs({runsData:F,enabledSectionNames:["model"===o?p.NN:p.rx],filterMetricNames:e=>{const t=e.startsWith(p.qt);return"model"===o?!t:t}});c((s=>({...s,compareRunCharts:e,compareRunSections:t})))}}),[v,y,F,o,c]),(0,d.useEffect)((()=>{c((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:s,isResultUpdated:r}=vr.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:F,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const t=e.startsWith(p.qt);return"model"===o?!t:t}});return r?{...e,compareRunCharts:t,compareRunSections:s}:e}))}),[F,c,o]);const _=(0,wr.$)(),U=l.autoRefreshEnabled&&(0,Vt.vC)()&&_;return(0,Ar.L)({runUuids:[t.runUuid],runUuidsIsActive:["RUNNING"===t.status],autoRefreshEnabled:U,enabled:(0,Vt.HW)()}),(0,E.FD)("div",{css:br,children:[(0,E.FD)("div",{css:(0,r.AH)({paddingBottom:u.spacing.md,display:"flex",gap:u.spacing.sm,flex:"0 0 auto"},""),children:[(0,E.Y)(i.pde,{role:"searchbox",prefix:(0,E.Y)(i.WIv,{}),value:h,allowClear:!0,onChange:e=>m(e.target.value),placeholder:f({id:"Xs1oJm",defaultMessage:"Search metric charts"})}),(0,Vt.vC)()&&(0,E.Y)(i.ffE,{pressed:l.autoRefreshEnabled,onPressedChange:e=>{c((t=>({...t,autoRefreshEnabled:e})))},children:f({id:"zC/uKl",defaultMessage:"Auto-refresh"})})]}),(0,E.Y)("div",{css:Cr,children:(0,E.Y)(Ut.W,{contextData:w,component:Ht,children:(0,E.Y)(Jt.G,{children:(0,E.Y)(yr.J,{compareRunSections:y,compareRunCharts:v,reorderCharts:k,insertCharts:D,chartData:F,startEditChart:e=>I(e),removeChart:N,addNewChartCard:e=>t=>I(vr.i$.getEmptyChartCardByType(t,!1,void 0,e)),search:h,supportedChartTypes:[vr.zL.LINE,vr.zL.BAR,vr.zL.IMAGE],setFullScreenChart:x,autoRefreshEnabled:U,groupBy:null})})})}),R&&(0,E.Y)(Yr.z,{chartRunData:F,metricKeyList:s,paramKeyList:[],config:R,onSubmit:e=>{T(e),I(null)},onCancel:()=>I(null),groupBy:null,supportedChartTypes:[vr.zL.LINE,vr.zL.BAR,vr.zL.IMAGE]}),(0,E.Y)(Mr._,{fullScreenChart:Y,onCancel:()=>x(void 0),chartData:F,tooltipContextValue:w,tooltipComponent:Ht,autoRefreshEnabled:U,groupBy:null})]})},Rr=e=>{const t=`${e.runInfo.runUuid}-${e.mode}`,s=(0,d.useMemo)((()=>Ft.A.getStoreForComponent("RunPage",t)),[t]),[r,i]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,Vt.vC)()};try{const t=s.getItem("chartUIState");return t?JSON.parse(t):e}catch{return e}}));return(0,d.useEffect)((()=>{s.setItem("chartUIState",JSON.stringify(r))}),[r,s]),(0,E.Y)(xr.oB,{updateChartsUIState:i,children:(0,E.Y)(Sr,{...e,chartUIState:r,updateChartsUIState:i})})},Ir=()=>(0,E.FD)(c.L,{children:[(0,E.Y)(i.oud,{loading:!0,label:(0,E.Y)(v.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,E.Y)(i.I_K,{seed:`s-${e}`},e)))]}),kr=()=>{const{runUuid:e,experimentId:t}=(0,u.g)(),s=(0,u.Zp)(),{theme:i}=(0,a.u)(),[o,g]=(0,d.useState)(!1),[f,v]=(0,d.useState)(!1);l()(e,"[RunPage] Run UUID route param not provided"),l()(t,"[RunPage] Experiment ID route param not provided");const{refetchRun:y,loading:Y,data:x,errors:{experimentFetchError:M,runFetchError:w}}=((e,t)=>{const[s,r]=(0,d.useState)(""),[i,a]=(0,d.useState)(""),o=(0,n.wA)(),{runInfo:l,tags:c,latestMetrics:u,experiment:h,params:p}=(0,n.d4)((s=>({runInfo:s.entities.runInfosByUuid[e],tags:s.entities.tagsByRunUuid[e],latestMetrics:s.entities.latestMetricsByRunUuid[e],params:s.entities.paramsByRunUuid[e],experiment:s.entities.experimentsById[t]}))),m=(0,d.useCallback)((()=>{const t=(0,Xe.aO)(e);return r(t.meta.id),o(t)}),[o,e]),g=(0,d.useCallback)((()=>{const e=(0,Xe.yc)(t);return a(e.meta.id),o(e)}),[o,t]),f=(0,d.useCallback)((()=>{o((0,U.hY)({run_id:e}))}),[o,e]);(0,d.useEffect)((()=>{l||m(),f()}),[l,m,f]),(0,d.useEffect)((()=>{h||g()}),[h,g]);const{loading:v,error:y}=(0,n.d4)((e=>{var t,r,i,a;return{loading:!s||Boolean(null===(t=e.apis)||void 0===t||null===(r=t[s])||void 0===r?void 0:r.active),error:null===(i=e.apis)||void 0===i||null===(a=i[s])||void 0===a?void 0:a.error}})),{loading:Y,error:x}=(0,n.d4)((e=>{var t,r,a,n;return{loading:!s||Boolean(null===(t=e.apis)||void 0===t||null===(r=t[i])||void 0===r?void 0:r.active),error:null===(a=e.apis)||void 0===a||null===(n=a[i])||void 0===n?void 0:n.error}}));return{loading:v||Y,data:{runInfo:l,tags:c,params:p,latestMetrics:u,experiment:h},refetchRun:m,errors:{runFetchError:y,experimentFetchError:x}}})(e,t),{runInfo:A,latestMetrics:b,tags:C,experiment:S,params:R}=x,[I,k]=(0,d.useMemo)((()=>b?[Object.keys(b).filter((e=>!(0,Tt.bw)(e))),Object.keys(b).filter((e=>(0,Tt.bw)(e)))]:[[],[]]),[b]),{comparedExperimentIds:D=[],hasComparedExperimentsBefore:N=!1}=(0,n.d4)((e=>e.comparedExperiments||{})),T=xt(),F=(0,ft.U)(`(min-width: ${i.responsive.breakpoints.sm}px)`),_=Y&&(!A||!S);return w instanceof qt.s&&w.getErrorCode()===me.tG.RESOURCE_DOES_NOT_EXIST?(0,E.Y)(mr,{runId:e}):M instanceof qt.s&&M.getErrorCode()===me.tG.RESOURCE_DOES_NOT_EXIST?(0,E.Y)(gr.A,{}):w||M?null:_?(0,E.Y)(Ir,{}):(0,E.FD)(E.FK,{children:[(0,E.FD)(c.L,{usesFullHeight:F,children:[(0,E.Y)(kt,{comparedExperimentIds:D,experiment:S,handleRenameRunClick:()=>g(!0),handleDeleteRunClick:()=>v(!0),hasComparedExperimentsBefore:N,runDisplayName:h.A.getRunDisplayName(A,e),runTags:C,runParams:R,runUuid:e}),(0,E.Y)("div",{css:(0,r.AH)({flex:1,overflow:"auto",marginBottom:i.spacing.sm,display:"flex"},""),children:(()=>{switch(T){case p.N3.MODEL_METRIC_CHARTS:return(0,Vt.b2)()?(0,E.Y)(Rr,{mode:"model",metricKeys:I,runInfo:A},"model"):(0,E.Y)(ms,{mode:"model",metricKeys:I,runInfo:A});case p.N3.SYSTEM_METRIC_CHARTS:return(0,Vt.b2)()?(0,E.Y)(Rr,{mode:"system",metricKeys:k,runInfo:A},"system"):(0,E.Y)(ms,{mode:"system",metricKeys:k,runInfo:A});case p.N3.ARTIFACTS:return(0,E.Y)(vt,{runUuid:e,runTags:C,experimentId:t})}return(0,E.Y)(hr,{runUuid:e,onRunDataUpdated:y})})()})]}),(0,E.Y)(m.jP,{runUuid:e,onClose:()=>g(!1),runName:A.runName,isOpen:o,onSuccess:y}),(0,E.Y)(fr.A,{selectedRunIds:[e],onClose:()=>v(!1),isOpen:f,onSuccess:()=>{s(Yt.h.getExperimentPageRoute(t))}})]})};var Dr=kr},74662:function(e,t,s){s.d(t,{QN:function(){return c},F3:function(){return h},xH:function(){return p},BE:function(){return u}});var r=s(31014),i=s(95574),a=s(88443),n=s(50111);const{Option:o,OptGroup:l}=i._vn,d="Create New Model",c=`$$$__${d}__$$$`,u="selectedModel",h="modelName";class p extends r.Component{constructor(){super(...arguments),this.state={selectedModel:null},this.handleModelSelectChange=e=>{this.setState({selectedModel:e})},this.modelNameValidator=(e,t,s)=>{const{modelByName:r}=this.props;s(r[t]?`Model "${t}" already exists.`:void 0)},this.handleFilterOption=(e,t)=>-1!==(t&&t.value||"").toLowerCase().indexOf(e.toLowerCase())}renderExplanatoryText(){const{isCopy:e}=this.props,{selectedModel:t}=this.state;if(!t||t===c)return null;const s=e?(0,n.Y)(a.A,{id:"hxMEqi",defaultMessage:"The model version will be copied to {selectedModel} as a new version.",values:{selectedModel:t}}):(0,n.Y)(a.A,{id:"zjXq2X",defaultMessage:"The model will be registered as a new version of {selectedModel}.",values:{selectedModel:t}});return(0,n.Y)("p",{className:"modal-explanatory-text",children:s})}renderModel(e){return(0,n.Y)(o,{value:e.name,children:e.name},e.name)}render(){const{modelByName:e,innerRef:t,isCopy:s}=this.props,{selectedModel:r}=this.state,a=r===c;return(0,n.FD)(i.lVW,{ref:t,layout:"vertical",className:"register-model-form",children:[(0,n.Y)(i.lVW.Item,{label:s?(0,n.Y)("b",{children:"Copy to model"}):"Model",name:u,rules:[{required:!0,message:"Please select a model or create a new one."}],children:(0,n.FD)(i._vn,{dropdownClassName:"model-select-dropdown",onChange:this.handleModelSelectChange,placeholder:"Select a model",filterOption:this.handleFilterOption,onSearch:this.props.onSearchRegisteredModels,showSearch:!0,children:[(0,n.FD)(o,{value:c,className:"create-new-model-option",children:[(0,n.Y)("i",{className:"fa fa-plus fa-fw",style:{fontSize:13}})," ",d]}),(0,n.Y)(l,{label:"Models",children:Object.values(e).map((e=>this.renderModel(e)))})]})}),a?(0,n.Y)(i.lVW.Item,{label:"Model Name",name:h,rules:[{required:!0,message:"Please input a name for the new model."},{validator:this.modelNameValidator}],children:(0,n.Y)(i.pde,{placeholder:"Input a model name"})}):null,this.renderExplanatoryText()]})}}},92516:function(e,t,s){s.d(t,{i:function(){return y}});var r=s(31014),i=s(6224),a=s(6928),n=s(47664);var o=s(88443),l=s(64912),d=s(95574),c=s(50111);const{Column:u}=a.A,{Text:h}=i.T,p=2;function m(e,t){const{type:s}=e,r=" ".repeat(t*p);if("object"===s){return`${r}{\n${Object.keys(e.properties).map((s=>{const r=e.properties[s],i=r.required?"":" (optional)",a=m(r,t+1),n=(t+1)*p;return`${" ".repeat(n)}${s}: ${a.slice(n)+i}`})).join(",\n")}\n${r}}`}if("array"===s){const s=t*p;return`${r}Array(${m(e.items,t).slice(s)})`}return`${r}${s}`}function g(e){let t=!0;void 0!==e.required?({required:t}=e):void 0!==e.optional&&e.optional&&(t=!1);const s=t?(0,c.Y)(h,{bold:!0,children:"(required)"}):(0,c.Y)(h,{color:"secondary",children:"(optional)"}),r="name"in e?e.name:"-";return(0,c.FD)(h,{children:[r," ",s]})}function f(e){const t="tensor"===e.type?`Tensor (dtype: ${(s=e)["tensor-spec"].dtype}, shape: [${s["tensor-spec"].shape}])`:m(e,0);var s;return(0,c.Y)("pre",{css:M,children:t})}class v extends r.PureComponent{constructor(){super(...arguments),this.renderSchemaTable=(e,t)=>(0,c.Y)(a.A,{className:"inner-table",size:"middle",showHeader:!1,pagination:!1,locale:{emptyText:`No schema ${t}.`},dataSource:this.getSchemaRowData(e),columns:[{title:"Name",dataIndex:"name",key:"name",width:"40%"},{title:"Type",dataIndex:"type",key:"type",width:"60%"}],scroll:{y:240}}),this.getSchemaRowData=e=>{const t=[];return e.forEach(((e,s)=>{t[s]={key:s,name:g(e),type:f(e)}})),t},this.renderSectionHeader=e=>(0,c.Y)("strong",{className:"primary-text",children:e})}render(){const{schema:e}=this.props,t=e.inputs.length||e.outputs.length?[{key:"1",name:this.props.intl.formatMessage({id:"sxlGRc",defaultMessage:"Inputs ({numInputs})"},{numInputs:e.inputs.length}),type:"",table:this.renderSchemaTable(e.inputs,"inputs")},{key:"2",name:this.props.intl.formatMessage({id:"llVQ2r",defaultMessage:"Outputs ({numOutputs})"},{numOutputs:e.outputs.length}),type:"",table:this.renderSchemaTable(e.outputs,"outputs")}]:[],{theme:s}=this.props.designSystemThemeApi;return(0,c.Y)("div",{css:x(s),children:(0,c.FD)(a.A,{className:"outer-table",rowClassName:"section-header-row",size:"middle",pagination:!1,defaultExpandAllRows:this.props.defaultExpandAllRows,expandRowByClick:!0,expandedRowRender:e=>e.table,expandIcon:e=>{let{expanded:t,onExpand:s,record:r}=e;return t?(0,c.Y)("span",{onClick:e=>s(r,e),children:(0,c.Y)(d.pgH,{})}):(0,c.Y)("span",{onClick:e=>s(r,e),children:(0,c.Y)(d.Xeq,{})})},locale:{emptyText:(0,c.Y)("div",{children:(0,c.Y)(o.A,{id:"Wd8Tga",defaultMessage:"No schema. See <link>MLflow docs</link> for how to include input and output schema with your model.",values:{link:e=>(0,c.Y)("a",{href:n.zR,target:"_blank",rel:"noreferrer",children:e})}})})},dataSource:t,scroll:{x:240},children:[(0,c.Y)(u,{title:this.props.intl.formatMessage({id:"Nj6Ez5",defaultMessage:"Name"}),width:"40%",dataIndex:"name",render:this.renderSectionHeader},1),(0,c.Y)(u,{title:this.props.intl.formatMessage({id:"2f2qeb",defaultMessage:"Type"}),width:"60%",dataIndex:"type",render:this.renderSectionHeader},2)]},"schema-table")})}}const y=(0,l.Ay)((0,i.W)(v)),Y=".ant-table-middle>.ant-table-content>.ant-table-scroll>.ant-table-body>table",x=e=>({[`${Y}>.ant-table-thead>tr>th.ant-table-expand-icon-th`]:{padding:"12px 0",width:"32px"},[`${Y}>.ant-table-thead>tr>th.ant-table-row-cell-break-word`]:{padding:"12px 0"},[`${Y}>.ant-table-tbody>tr>td.ant-table-row-cell-break-word`]:{padding:"12px 0"},[`${Y}>.ant-table-tbody>tr.section-header-row>td.ant-table-row-cell-break-word`]:{padding:"0",width:"32px"},[`${Y}>.ant-table-tbody>tr.section-header-row>td.ant-table-row-expand-icon-cell`]:{padding:"0"},".outer-table .ant-table-body":{overflowX:"auto !important",overflowY:"hidden"},".inner-table .ant-table-body":{overflowY:"auto !important"},".inner-table":{maxWidth:800},".outer-table":{maxWidth:800},".section-header-row":{lineHeight:"32px",cursor:"pointer"},".ant-table-tbody>tr>td":{borderColor:e.colors.borderDecorative},".ant-table-thead>tr>th":{backgroundColor:e.colors.backgroundSecondary,color:e.colors.textPrimary,borderColor:e.colors.borderDecorative},".ant-table-tbody>tr.ant-table-row:hover td":{backgroundColor:e.colors.backgroundSecondary},".ant-table-cell":{backgroundColor:e.colors.backgroundPrimary,color:e.colors.textPrimary}}),M=e=>({whiteSpace:"pre-wrap",padding:e.spacing.sm,marginTop:e.spacing.sm,marginBottom:e.spacing.sm})},59508:function(e,t,s){s.d(t,{_C:function(){return o},pc:function(){return a},so:function(){return n}});var r=s(81866),i=s(69708);function a(e){return e?`${r.Qs} ilike ${(0,i.GP)(e,!0)}`:""}function n(){let{query:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[],s=e.includes("tags.")?e:a(e);return s&&t.push(s),t.join(" AND ")}function o(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?a(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}}}]);
//# sourceMappingURL=419.ef0420bd.chunk.js.map